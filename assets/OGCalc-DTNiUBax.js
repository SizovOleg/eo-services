import{r as w,j as a}from"./index--0-evmS6.js";const m=6371e3,H=3986004418e5,Q=72921159e-12,U=86164.0905;function c({label:t,value:e,onChange:s,unit:l,step:r}){return a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm text-gray-600",children:t}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsx("input",{type:"number",step:r||"any",value:e,onChange:function(o){s(parseFloat(o.target.value)||0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),l&&a.jsx("span",{className:"text-sm text-gray-500 w-16",children:l})]})]})}function h({label:t,value:e,unit:s}){return a.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[a.jsx("span",{className:"text-gray-600",children:t}),a.jsxs("span",{className:"font-medium",children:[e," ",a.jsx("span",{className:"text-gray-500 text-sm",children:s})]})]})}function X(t,e,s,l){var r=Math.floor(s/60),o=Math.floor(s%60),i=l.split("-"),n=parseInt(i[0]),v=parseInt(i[1])-1,_=parseInt(i[2]),y=new Date(n,v,_,r,o,0),b=Math.PI/180,I=1e3*60*60*24,M=2440588,p=2451545,E=y.valueOf()/I-.5+M,f=E-p,N=b*23.4397,d=b*(357.5291+.98560028*f),W=b*(1.9148*Math.sin(d)+.02*Math.sin(2*d)+3e-4*Math.sin(3*d)),O=b*102.9372,u=d+W+O+Math.PI,k=Math.asin(Math.sin(u)*Math.sin(N)),P=Math.atan2(Math.sin(u)*Math.cos(N),Math.cos(u)),R=b*-40,C=b*(280.16+360.9856235*f)-R,F=C-P,x=b*t,g=Math.sin(x)*Math.sin(k)+Math.cos(x)*Math.cos(k)*Math.cos(F);return Math.asin(g)/b}function la(t){var e=Math.floor(t/60),s=Math.floor(t%60),l=Math.floor(t%1*60);return e.toString().padStart(2,"0")+":"+s.toString().padStart(2,"0")+":"+l.toString().padStart(2,"0")}function $(t,e){var s=e*1440/360,l=720;if(t===1)return[l];var r=[],o=[];if(t%2!==0)for(var i=t/2-.5,n=1;n<=i;n++)o.push(l+s*n),r.push(l-s*n);else{for(var i=t/2,n=1;n<=i;n++)o.push(l+s*n),r.push(l-s*n);r.pop()}return r.reverse(),r.concat([l],o)}function K(t){for(var e=m+t*1e3,s=2*Math.PI*Math.sqrt(Math.pow(e,3)/H),l=s/U,r=1,o=1,i=1;i<=200;i++){var n=Math.round(i*l);if(n!==0){r=i,o=n;var v=Math.abs(i*s-n*U)/U*360;if(v<.05)return[i,n,i*s/86400]}}return[r,o,r*s/86400]}function aa(t){for(var e=t.n_op,s=t.n_sats,l=t.rasst,r=t.H,o=t.lat_deg,i=t.W,n=t.alpha,v=t.sun_angle,_=t.startDate||"2025-03-21",y=2*Math.PI*Math.sqrt(Math.pow(m+r*1e3,3)/H),b=Q*y,I=m/1e3*b,M=I*Math.cos(o*Math.PI/180),p=m*2*Math.PI,E=l*p/360/1e3,f=111.3*Math.cos(o*Math.PI/180)*l,N=n===0?i:2*r*Math.tan(n*Math.PI/180),d=K(r),W=$(e,l),O=[],u=0;u<W.length;u++){var k=W[u],P=X(o,40,k,_),R;v===-90?R=1:P>v?R=.5:R=0,O.push({num:u+1,time:k,sunAlt:P,DOL_sun:R})}for(var C=0,u=0;u<O.length;u++)O[u].DOL_sun===0&&C++;var F=e*s*i,x="";if(C===e)x="0 сут";else if(C===0){var g=M/F/.5;g<d[1]?x=g.toFixed(2)+" сут":g<2*d[1]?x=(d[1]*100/g).toFixed(2)+"%":x=(2*d[1]*100/g).toFixed(2)+"%"}else{var g=M/(s*i*(e-C))/.5;g<d[1]?x=g.toFixed(2)+" сут":g<2*d[1]?x=(d[1]*100/g).toFixed(2)+"%":x=(2*d[1]*100/g).toFixed(2)+"%"}for(var T=2*N*s*e/M,q=0,u=0;u<O.length;u++)q+=T/e*O[u].DOL_sun;return{T:(y/60).toFixed(2),d_lat:M.toFixed(2),d_lat_eq:I.toFixed(2),l_lat_OP:f.toFixed(2),l_OP:E.toFixed(2),W_obzor:N.toFixed(1),rep_cycle:d[1],POKR:x,OPER:q.toFixed(2),op_info:O,ZERO:C}}function ia(t){for(var e=aa(t),s=t.startDate||"2025-03-21",l=t.n_op,r=t.n_sats,o=t.W,i=t.H,n=t.alpha,v=t.sun_angle,_=t.lat_deg,y=t.rasst,b=2*Math.PI*Math.sqrt(Math.pow(m+i*1e3,3)/H),I=Q*b,M=m/1e3*I,p=M*Math.cos(_*Math.PI/180),E=n===0?o:2*i*Math.tan(n*Math.PI/180),f=K(i),N=l*r*o,d=l*r*E,W=e.ZERO,O=e.op_info,u=$(l,y),k=s.split("-"),P=parseInt(k[0]),R=parseInt(k[1])-1,C=parseInt(k[2]),F=[],x=0;x<10;x++){var g=Math.round((x+1)*f[1]),T=new Date(P,R,C);T.setDate(T.getDate()+g);for(var q=T.getFullYear()+"-"+String(T.getMonth()+1).padStart(2,"0")+"-"+String(T.getDate()).padStart(2,"0"),J=0;J<u.length;J++){var sa=X(_,40,u[J],q),z;v===-90?z=1:sa>v?z=.5:z=0,F.push(z)}}var na=F.length>0?F[0]:0,L="",j=[];if(W===l)L="0 сут";else{var S;if(l===1?S=p/N/O[0].DOL_sun:W===0?S=p/N/.5:S=p/(r*o*(l-W))/.5,S<f[1])L=S.toFixed(2)+" сут";else{var V;S<2*f[1]?V=f[1]*100/S:V=2*f[1]*100/S,L=V.toFixed(2)+"%";var A=p-V/100*p;if(j.push("Осталось покрыть на заданной широте: "+A.toFixed(2)+" км"),n!==0&&na!==0){for(var Z=Math.floor(A/N/f[1]),B=A/N-Z*f[1],Y=F.slice(0,Math.min(Z+1,F.length)),D=-1,G=0;G<Y.length;G++)if(Y[G]===0){D=G;break}if(A/d<=1)j.push("Возможно достижение полного покрытия"),D===-1?j.push("Полное покрытие ещё за "+(f[1]*Z+B).toFixed(2)+" сут"):j.push("Солнце ушло через "+D+" периода кратности");else{j.push("Полное покрытие не может быть достигнуто");var ra=100-(A-d)/p*100;j.push("Макс. покрытие: "+ra.toFixed(2)+"%"),D===-1?j.push("Макс. покрытие ещё за "+(f[1]*Z+B).toFixed(2)+" сут"):j.push("Солнце ушло через "+D+" периода кратности")}}else n===0?(j.push("Нет отклонения по углу визирования"),j.push("Полное покрытие невозможно")):(j.push("Солнце ниже заявленной границы"),j.push("Дальнейшее покрытие невозможно"))}}return{T:e.T,d_lat:e.d_lat,d_lat_eq:e.d_lat_eq,l_lat_OP:e.l_lat_OP,l_OP:e.l_OP,W_obzor:e.W_obzor,rep_cycle:e.rep_cycle,OPER:e.OPER,op_info:e.op_info,ZERO:e.ZERO,POKR:L,additionalInfo:j}}function ea({params:t,setParams:e}){return a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(c,{label:"Число ОП",value:t.n_op,onChange:function(s){e(Object.assign({},t,{n_op:s}))},unit:"шт",step:"1"}),a.jsx(c,{label:"Число КА в ОП",value:t.n_sats,onChange:function(s){e(Object.assign({},t,{n_sats:s}))},unit:"шт",step:"1"}),a.jsx(c,{label:"Разнесение ОП",value:t.rasst,onChange:function(s){e(Object.assign({},t,{rasst:s}))},unit:"°"}),a.jsx(c,{label:"Высота орбиты",value:t.H,onChange:function(s){e(Object.assign({},t,{H:s}))},unit:"км"}),a.jsx(c,{label:"Широта съёмки",value:t.lat_deg,onChange:function(s){e(Object.assign({},t,{lat_deg:s}))},unit:"°"}),a.jsx(c,{label:"Полоса захвата",value:t.W,onChange:function(s){e(Object.assign({},t,{W:s}))},unit:"км"}),a.jsx(c,{label:"Угол визирования",value:t.alpha,onChange:function(s){e(Object.assign({},t,{alpha:s}))},unit:"°"}),a.jsx(c,{label:"Мин. высота Солнца",value:t.sun_angle,onChange:function(s){e(Object.assign({},t,{sun_angle:s}))},unit:"°"})]})}function ta({results:t}){return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold mb-2 text-gray-800",children:"Орбитальные плоскости"}),a.jsx("div",{className:"space-y-1 text-sm",children:t.op_info.map(function(e){return a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("span",{children:["ОП ",e.num,": ",la(e.time)]}),a.jsxs("span",{className:e.DOL_sun===0?"text-red-600":"text-green-600",children:["Солнце: ",e.sunAlt.toFixed(2),"°"]})]},e.num)})})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-1",children:[a.jsx("h3",{className:"font-semibold mb-3 text-gray-800",children:"Параметры"}),a.jsx(h,{label:"Межвиток на широте",value:t.d_lat,unit:"км"}),a.jsx(h,{label:"Межвиток на экваторе",value:t.d_lat_eq,unit:"км"}),a.jsx(h,{label:"Расстояние между ОП (широта)",value:t.l_lat_OP,unit:"км"}),a.jsx(h,{label:"Расстояние между ОП (экватор)",value:t.l_OP,unit:"км"}),a.jsx(h,{label:"Полоса обзора",value:t.W_obzor,unit:"км"}),a.jsx(h,{label:"Кратность орбиты",value:t.rep_cycle,unit:""}),a.jsx(h,{label:"ОП ниже угла Солнца",value:t.ZERO,unit:"шт"})]})]})}function oa(){var t=w.useState({n_op:2,n_sats:4,rasst:10,H:500,lat_deg:55,W:20,alpha:0,sun_angle:10,startDate:"2025-03-21"}),e=t[0],s=t[1],l=w.useState(null),r=l[0],o=l[1];function i(){o(ia(e))}return a.jsxs("div",{className:"space-y-6",children:[a.jsx(ea,{params:e,setParams:s}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Дата начала съёмки"}),a.jsx("input",{type:"date",value:e.startDate,onChange:function(n){s(Object.assign({},e,{startDate:n.target.value}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("button",{onClick:i,style:{width:"100%",padding:"12px",background:"#2563eb",color:"white",borderRadius:8,border:"none",cursor:"pointer",fontWeight:600,fontSize:15},children:"Рассчитать"}),r&&a.jsxs("div",{className:"space-y-4",children:[a.jsx(ta,{results:r}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold mb-3 text-gray-800",children:"Результат"}),a.jsx(h,{label:"Итоговое покрытие",value:r.POKR,unit:""}),r.additionalInfo&&r.additionalInfo.length>0&&a.jsx("div",{className:"mt-3 pt-3 border-t border-green-200",children:r.additionalInfo.map(function(n,v){return a.jsx("p",{className:"text-sm text-gray-600 py-1",children:n},v)})})]})]})]})}function ca(){var t=w.useState({n_op:2,n_sats:4,rasst:10,H:500,lat_deg:55,W:20,alpha:0,sun_angle:10,startDate:"2025-03-21"}),e=t[0],s=t[1],l=w.useState(null),r=l[0],o=l[1];function i(){o(aa(e))}return a.jsxs("div",{className:"space-y-6",children:[a.jsx(ea,{params:e,setParams:s}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Дата съёмки"}),a.jsx("input",{type:"date",value:e.startDate,onChange:function(n){s(Object.assign({},e,{startDate:n.target.value}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsx("button",{onClick:i,style:{width:"100%",padding:"12px",background:"#4f46e5",color:"white",borderRadius:8,border:"none",cursor:"pointer",fontWeight:600,fontSize:15},children:"Рассчитать"}),r&&a.jsxs("div",{className:"space-y-4",children:[a.jsx(ta,{results:r}),a.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold mb-3 text-gray-800",children:"Результат"}),a.jsx(h,{label:"Оперативность на широте",value:r.OPER,unit:"раз/сут"})]})]})]})}function ua(){var t=w.useState({n_sats:4,H:500,v_zapis:2,n_vitkov_work:7,t_vitok:10,VRL:300,t_sbros_dlit:8}),e=t[0],s=t[1],l=w.useState(null),r=l[0],o=l[1];function i(){var n=2*Math.PI*Math.sqrt(Math.pow(m+e.H*1e3,3)/H),v=e.t_vitok*e.v_zapis*e.n_sats*e.n_vitkov_work,_=v*1e3/(e.VRL*60),y=_/e.t_sbros_dlit;o({T:(n/60).toFixed(2),V:(v/8).toFixed(2),t_sbros:_.toFixed(2),n_sbros:y.toFixed(2)})}return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(c,{label:"Число КА в ОГ",value:e.n_sats,onChange:function(n){s(Object.assign({},e,{n_sats:n}))},unit:"шт",step:"1"}),a.jsx(c,{label:"Высота орбиты",value:e.H,onChange:function(n){s(Object.assign({},e,{H:n}))},unit:"км"}),a.jsx(c,{label:"Скорость записи в БЗУ",value:e.v_zapis,onChange:function(n){s(Object.assign({},e,{v_zapis:n}))},unit:"Гбит/с"}),a.jsx(c,{label:"Рабочих витков в сутки",value:e.n_vitkov_work,onChange:function(n){s(Object.assign({},e,{n_vitkov_work:n}))},unit:"шт",step:"1"}),a.jsx(c,{label:"Время работы на витке",value:e.t_vitok,onChange:function(n){s(Object.assign({},e,{t_vitok:n}))},unit:"мин"}),a.jsx(c,{label:"Скорость ВРЛ",value:e.VRL,onChange:function(n){s(Object.assign({},e,{VRL:n}))},unit:"Мбит/с"}),a.jsx(c,{label:"Длительность сброса",value:e.t_sbros_dlit,onChange:function(n){s(Object.assign({},e,{t_sbros_dlit:n}))},unit:"мин"})]}),a.jsx("button",{onClick:i,style:{width:"100%",padding:"12px",background:"#16a34a",color:"white",borderRadius:8,border:"none",cursor:"pointer",fontWeight:600,fontSize:15},children:"Рассчитать"}),r&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-1",children:[a.jsx("h3",{className:"font-semibold mb-3 text-gray-800",children:"Результаты"}),a.jsx(h,{label:"Период обращения",value:r.T,unit:"мин"}),a.jsx(h,{label:"Объём данных за сутки",value:r.V,unit:"Гбайт"}),a.jsx(h,{label:"Время сброса за сутки",value:r.t_sbros,unit:"мин"}),a.jsx(h,{label:"Число сеансов сброса",value:r.n_sbros,unit:"шт"})]})]})}function va(){var t=w.useState({n_sats:4,H:500,W:20,N_vit:7,t_vitok:10,days:30}),e=t[0],s=t[1],l=w.useState(null),r=l[0],o=l[1];function i(){var n=2*Math.PI*Math.sqrt(Math.pow(m+e.H*1e3,3)/H),v=86400/n,_=Math.sqrt(H/(m+e.H*1e3)),y=_/1e3*m/1e3/(m/1e3+e.H),b=Math.min(e.N_vit,v),I=Math.min(e.t_vitok,n/60),M=y*I*60*b,p=M*e.n_sats*e.W*e.days;o({T:(n/60).toFixed(2),v_podsputnik:y.toFixed(2),n_vitkov:v.toFixed(2),km2:Math.round(p).toLocaleString("ru-RU")})}return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(c,{label:"Число КА в ОГ",value:e.n_sats,onChange:function(n){s(Object.assign({},e,{n_sats:n}))},unit:"шт",step:"1"}),a.jsx(c,{label:"Высота орбиты",value:e.H,onChange:function(n){s(Object.assign({},e,{H:n}))},unit:"км"}),a.jsx(c,{label:"Полоса захвата",value:e.W,onChange:function(n){s(Object.assign({},e,{W:n}))},unit:"км"}),a.jsx(c,{label:"Число витков съёмки",value:e.N_vit,onChange:function(n){s(Object.assign({},e,{N_vit:n}))},unit:"шт",step:"1"}),a.jsx(c,{label:"Время съёмки на витке",value:e.t_vitok,onChange:function(n){s(Object.assign({},e,{t_vitok:n}))},unit:"мин"}),a.jsx(c,{label:"Период съёмки",value:e.days,onChange:function(n){s(Object.assign({},e,{days:n}))},unit:"сут",step:"1"})]}),a.jsx("button",{onClick:i,style:{width:"100%",padding:"12px",background:"#7c3aed",color:"white",borderRadius:8,border:"none",cursor:"pointer",fontWeight:600,fontSize:15},children:"Рассчитать"}),r&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-1",children:[a.jsx("h3",{className:"font-semibold mb-3 text-gray-800",children:"Результаты"}),a.jsx(h,{label:"Период обращения",value:r.T,unit:"мин"}),a.jsx(h,{label:"Скорость подспутниковой точки",value:r.v_podsputnik,unit:"км/с"}),a.jsx(h,{label:"Витков в сутки",value:r.n_vitkov,unit:"шт"}),a.jsx(h,{label:"Производительность",value:r.km2,unit:"км²"})]})]})}function ha(){var t=w.useState(0),e=t[0],s=t[1],l=["Покрытие","Оперативн.","Инф. потоки","Производит."];return a.jsxs("div",{className:"page-content",style:{maxWidth:640},children:[a.jsxs("div",{className:"service-header",children:[a.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 36 36",fill:"none",children:[a.jsx("circle",{cx:"18",cy:"18",r:"14",stroke:"var(--accent)",strokeWidth:"1.5",strokeDasharray:"4 3"}),a.jsx("circle",{cx:"18",cy:"18",r:"3",fill:"var(--accent)"}),a.jsx("circle",{cx:"18",cy:"6",r:"2",fill:"var(--accent)"}),a.jsx("circle",{cx:"18",cy:"30",r:"2",fill:"var(--accent)"})]}),a.jsx("h1",{children:"Калькулятор ОГ"})]}),a.jsxs("div",{className:"card",style:{padding:0,overflow:"hidden"},children:[a.jsx("div",{className:"flex border-b",children:l.map(function(r,o){return a.jsx("button",{onClick:function(){s(o)},className:"flex-1 py-3 text-xs font-medium transition "+(e===o?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700"),children:r},o)})}),a.jsxs("div",{className:"p-5",children:[e===0&&a.jsx(oa,{}),e===1&&a.jsx(ca,{}),e===2&&a.jsx(ua,{}),e===3&&a.jsx(va,{})]})]})]})}export{ha as default};
