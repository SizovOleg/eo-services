import{r as i,j as t}from"./index-kb2XKiuk.js";const J=398600.4418,k=6371;function et(f,u,j,d,g,O){const M=j*Math.PI/180,A=d*Math.PI/180,$=g*Math.PI/180,b=O*Math.PI/180,E=f*(1-u*u),c=E/(1+u*Math.cos(b)),W=c*Math.cos(b),F=c*Math.sin(b),K=Math.sqrt(J*E),Y=-J/K*Math.sin(b),oe=J/K*(u+Math.cos(b)),l=Math.cos(A),_=Math.sin(A),G=Math.cos($),Z=Math.sin($),D=Math.cos(M),ae=Math.sin(M),v=[[l*G-_*Z*D,-l*Z-_*G*D,_*ae],[_*G+l*Z*D,-_*Z+l*G*D,-l*ae],[Z*ae,G*ae,D]];return{x:v[0][0]*W+v[0][1]*F,y:v[2][0]*W+v[2][1]*F,z:v[1][0]*W+v[1][1]*F,vx:v[0][0]*Y+v[0][1]*oe,vy:v[2][0]*Y+v[2][1]*oe,vz:v[1][0]*Y+v[1][1]*oe,r:c}}function kt(f,u,j){const d=u.getUTCFullYear()%100,g=new Date(Date.UTC(u.getUTCFullYear(),0,1)),O=(u-g)/864e5+1,M=d.toString().padStart(2,"0")+O.toFixed(8).padStart(12,"0"),A=Math.sqrt(J/Math.pow(f.a,3))*86400/(2*Math.PI),$=`1 ${String(j).padStart(5,"0")}U 24001A   ${M}  .00000000  00000-0  00000-0 0  9990`,b=`2 ${String(j).padStart(5,"0")} ${f.i.toFixed(4).padStart(8)} ${(f.raan%360).toFixed(4).padStart(8)} ${f.e.toFixed(7).substring(2)} ${(f.argp%360).toFixed(4).padStart(8)} ${(f.ma%360).toFixed(4).padStart(8)} ${A.toFixed(8).padStart(11)}    0`;return{line1:$,line2:b}}function $t(f,u){let j=`stk.v.12.0
BEGIN Ephemeris
NumberOfEphemerisPoints ${f.length}
ScenarioEpoch ${u.toISOString()}
InterpolationMethod Lagrange
InterpolationOrder 5
CentralBody Earth
CoordinateSystem J2000
EphemerisTimePosVel

`;return f.forEach(d=>{j+=`0.0 ${d.eci.x*1e3} ${d.eci.y*1e3} ${d.eci.z*1e3} ${d.eci.vx*1e3} ${d.eci.vy*1e3} ${d.eci.vz*1e3}
`}),j+`
END Ephemeris`}const q=["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#ffeaa7","#fd79a8","#a29bfe","#00b894","#e17055","#0984e3"];function Ie(f){return Math.sqrt(J/f)}function Te(f){return 2*Math.PI*Math.sqrt(Math.pow(f,3)/J)}function Et(f){const u=f.trim().split(`
`).map(g=>g.trim()).filter(g=>g),j=[];let d=0;for(;d<u.length;){let g="SAT",O,M;if(u[d]&&!u[d].startsWith("1 ")&&!u[d].startsWith("2 ")&&(g=u[d],d++),d<u.length&&u[d].startsWith("1 ")&&(O=u[d],d++),d<u.length&&u[d].startsWith("2 ")&&(M=u[d],d++),O&&M)try{const A=parseFloat(M.substring(8,16).trim()),$=parseFloat(M.substring(17,25).trim()),b=parseFloat("0."+M.substring(26,33).trim()),E=parseFloat(M.substring(34,42).trim()),c=parseFloat(M.substring(43,51).trim()),F=parseFloat(M.substring(52,63).trim())*2*Math.PI/86400,K=Math.pow(J/(F*F),1/3);j.push({name:g,hp:K*(1-b)-k,ha:K*(1+b)-k,inc:A,raan:$,argp:E,ecc:b,ma:c,a:K})}catch(A){console.error("TLE parse error:",A)}}return j}function Ft(){const j=document.createElement("canvas");j.width=2048,j.height=1024;const d=j.getContext("2d"),g=d.createLinearGradient(0,0,0,1024);return g.addColorStop(0,"#0a3d62"),g.addColorStop(.3,"#2980b9"),g.addColorStop(.5,"#3498db"),g.addColorStop(.7,"#2980b9"),g.addColorStop(1,"#0a3d62"),d.fillStyle=g,d.fillRect(0,0,2048,1024),d.getImageData(0,0,2048,1024)}function zt(){const f=i.useRef(null),u=i.useRef(null),[j,d]=i.useState(800),[g,O]=i.useState({x:.4,y:0}),[M,A]=i.useState(1),$=i.useRef(!1),b=i.useRef({x:0,y:0}),E=i.useRef(null),[c,W]=i.useState([{hp:550,ha:550,inc:53,raan:0,argp:0,ecc:0,sats:8,phaseOffset:0,color:q[0],satNames:[],orbitWidth:1,satSize:4}]),[F,K]=i.useState({phaseF:1,epoch:new Date().toISOString().slice(0,16)}),[Y,oe]=i.useState("view"),[l,_]=i.useState(0),[G,Z]=i.useState(null),[D,ae]=i.useState(45),[v,tt]=i.useState(0),[le,at]=i.useState(2048),[fe,st]=i.useState(!0),[be,nt]=i.useState(!1),[je,ct]=i.useState(!0),[ve,ot]=i.useState(!1),[ye,lt]=i.useState(!1),[re,rt]=i.useState(!1),[Me,Ae]=i.useState(0),[de,it]=i.useState(1),[Ne,We]=i.useState(0),Q=i.useRef(null),[De,Le]=i.useState(""),Oe=i.useRef(null),Ye=i.useRef(null);i.useEffect(()=>{const e=new Image;e.onload=()=>{const a=document.createElement("canvas");a.width=e.width,a.height=e.height;const r=a.getContext("2d");r.drawImage(e,0,0),E.current=r.getImageData(0,0,e.width,e.height)},e.onerror=()=>{E.current=Ft()},e.src="/eo_services/earth_texture.jpg"},[]),i.useEffect(()=>{const e=()=>{if(u.current){const a=u.current.clientWidth,r=window.innerHeight-120;d(Math.min(a,r,900))}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const ht=e=>{const a=e.target.files?.[0];if(a){const r=new FileReader;r.onload=s=>{const o=new Image;o.onload=()=>{const x=document.createElement("canvas");x.width=o.width,x.height=o.height;const U=x.getContext("2d");U.drawImage(o,0,0),E.current=U.getImageData(0,0,o.width,o.height),Z(s.target.result)},o.src=s.target.result},r.readAsDataURL(a)}},dt=e=>{const a=e.target.files?.[0];if(a){const r=new FileReader;r.onload=s=>_e(s.target.result),r.readAsText(a)}},_e=e=>{const a=Et(e);if(a.length===0)return;const r={};a.forEach(o=>{const x=`${o.inc.toFixed(1)}_${Math.round(o.raan/10)*10}`;r[x]||(r[x]=[]),r[x].push(o)});const s=Object.values(r).map((o,x)=>({hp:Math.round(o[0].hp),ha:Math.round(o[0].ha),inc:o[0].inc,raan:o[0].raan,argp:o[0].argp,ecc:o[0].ecc,sats:o.length,phaseOffset:0,color:q[x%q.length],satNames:o.map(U=>U.name),orbitWidth:1,satSize:4}));W(s),_(0),Le("")},xt=()=>{if(c.length>=10)return;const e=c[c.length-1];W([...c,{...e,raan:(e.raan+360/(c.length+1))%360,color:q[c.length%q.length],satNames:[],orbitWidth:e.orbitWidth||1,satSize:e.satSize||4}])},ut=e=>{c.length<=1||(W(c.filter((a,r)=>r!==e)),l>=c.length-1&&_(Math.max(0,c.length-2)))},R=(e,a,r)=>W(c.map((s,o)=>o===e?{...s,[a]:r}:s)),mt=()=>W(c.map((e,a)=>({...e,raan:a*360/c.length%360}))),P=i.useMemo(()=>{const e=[];return c.forEach((a,r)=>{const s=(a.hp+a.ha)/2+k,o=a.ha!==a.hp?(a.ha-a.hp)/(a.ha+a.hp+2*k):a.ecc,x=360/a.sats,U=2*Math.PI*Math.sqrt(Math.pow(s,3)/J),I=360/U;for(let T=0;T<a.sats;T++){const ee=(T*x+a.phaseOffset+r*F.phaseF*360/c.reduce((S,ie)=>S+ie.sats,0))%360,B=(ee+Me*I)%360,te=o<.01?B:B+2*o*Math.sin(B*Math.PI/180)*180/Math.PI,we=et(s,o,a.inc,a.raan,a.argp,te),H=a.satNames?.[T]||`P${r+1}-S${T+1}`;e.push({name:H,plane:r,slot:T,a:s,e:o,i:a.inc,raan:a.raan,argp:a.argp,ma:ee,nu:te,eci:we,period:U})}}),e},[c,F,Me]),xe=new Date(F.epoch),gt=c.reduce((e,a)=>e+a.sats,0),Ue=i.useMemo(()=>P.map((e,a)=>kt(e,xe,9e4+a)),[P,xe]),pt=i.useMemo(()=>$t(P,xe),[P,xe]),He=(e,a=1,r=Ne)=>{if(!e||!E.current)return;const s=e.getContext("2d"),o=e.width,x=e.height,U=Math.max(...c.map(n=>n.ha),550),I=M*Math.min(o,x)/(2.8*(U+k));s.fillStyle="#0a0a1a",s.fillRect(0,0,o,x);const T=Math.cos(-g.x),ee=Math.sin(-g.x),B=Math.cos(-g.y),te=Math.sin(-g.y),we=r*Math.PI/180,H=(n,h,m)=>{const X=n*B-m*te,L=n*te+m*B,w=h*T-L*ee,C=h*ee+L*T;return{x:o/2+X*I,y:x/2-w*I,z:C}},S=k*I,ie=E.current,he=ie.width,qe=ie.height,Ce=ie.data,Ke=D*Math.PI/180,Ge=v*Math.PI/180,Ze=Math.cos(Ge),se={x:Math.cos(Ke)*Ze,y:Math.sin(Ge),z:Math.sin(Ke)*Ze},Be=s.createImageData(o,x),ue=Be.data;for(let n=-S;n<S;n+=1)for(let h=-S;h<S;h+=1){const m=h*h+n*n;if(m>S*S)continue;const X=Math.sqrt(S*S-m),L=h/S,w=-n/S,C=X/S,y=w*T+C*ee,ce=-w*ee+C*T,V=L*B+ce*te,$e=-L*te+ce*B,Ee=Math.asin(Math.max(-1,Math.min(1,y))),St=((Math.atan2(V,$e)+we)/Math.PI+1)/2,wt=.5-Ee/Math.PI,Ct=(Math.floor(St*he)%he+he)%he,Fe=(Math.floor(wt*qe)%qe*he+Ct)*4,ge=V*se.x+y*se.y+$e*se.z;let Re=ge>.1?.4+.6*ge:ge>-.1?.2+(ge+.1)*2:.15;const Pe=Math.floor(o/2+h),ze=Math.floor(x/2+n);if(Pe>=0&&Pe<o&&ze>=0&&ze<x){const pe=(ze*o+Pe)*4;ue[pe]=Math.floor(Ce[Fe]*Re),ue[pe+1]=Math.floor(Ce[Fe+1]*Re),ue[pe+2]=Math.floor(Ce[Fe+2]*Re),ue[pe+3]=255}}s.putImageData(Be,0,0);const ke=k*2,ne=H(se.x*ke,se.y*ke,se.z*ke);s.beginPath(),s.arc(ne.x,ne.y,8*a,0,2*Math.PI);const me=s.createRadialGradient(ne.x,ne.y,0,ne.x,ne.y,12*a);if(me.addColorStop(0,"#ffff88"),me.addColorStop(.5,"#ffdd44"),me.addColorStop(1,"transparent"),s.fillStyle=me,s.fill(),je){s.beginPath(),s.strokeStyle="#ffff0066",s.lineWidth=1*a;for(let n=0;n<=360;n+=5){const h=n*Math.PI/180,m=H(k*Math.cos(h),0,k*Math.sin(h));n===0?s.moveTo(m.x,m.y):s.lineTo(m.x,m.y)}s.stroke()}if(ve){s.beginPath(),s.strokeStyle="#ff444466",s.lineWidth=1*a;for(let n=-90;n<=90;n+=5){const h=n*Math.PI/180,m=H(0,k*Math.sin(h),k*Math.cos(h));n===-90?s.moveTo(m.x,m.y):s.lineTo(m.x,m.y)}s.stroke()}if(ye){const n=k*1.8,h=H(0,0,0);[["#ff4444aa","X",n,0,0],["#44ff44aa","Y",0,n,0],["#4444ffaa","Z",0,0,n]].forEach(([m,X,L,w,C])=>{const y=H(L,w,C);s.beginPath(),s.strokeStyle=m,s.lineWidth=2*a,s.moveTo(h.x,h.y),s.lineTo(y.x,y.y),s.stroke(),s.fillStyle=m.slice(0,7),s.font=`${12*a}px sans-serif`,s.fillText(X,y.x+5*a,y.y)})}const Ve=new Set;P.forEach(n=>{const h=`${n.plane}-${n.a.toFixed(0)}-${n.i.toFixed(1)}-${n.raan.toFixed(1)}`;if(Ve.has(h))return;Ve.add(h);const m=c[n.plane],X=m?.color||q[n.plane%q.length],L=m?.orbitWidth||1,w=[];for(let C=0;C<=360;C+=2){const y=et(n.a,n.e,n.i,n.raan,n.argp,C);w.push(H(y.x,y.y,y.z))}for(let C=0;C<w.length-1;C++){const y=w[C],ce=w[C+1],V=(y.z+ce.z)/2;let Ee=V<0&&Math.sqrt((y.x-o/2)**2+(y.y-x/2)**2)<S*1.1?.3+V/(k*I)*.1+.1:V<0?.5+V/(n.a*I)*.1+.1:.5+Math.min(V/(n.a*I)*.3,.4);const Qe=Math.floor(Math.max(.05,Math.min(.9,Ee))*255).toString(16).padStart(2,"0");s.beginPath(),s.strokeStyle=X+Qe,s.lineWidth=L*a,s.moveTo(y.x,y.y),s.lineTo(ce.x,ce.y),s.stroke()}});const Je=P.map(n=>{const h=H(n.eci.x,n.eci.y,n.eci.z),m=c[n.plane],X=Math.sqrt((h.x-o/2)**2+(h.y-x/2)**2);let w=h.z<0&&X<S*1.05?.3+h.z/(n.a*I)*.1+.1:h.z<0?.5+h.z/(n.a*I)*.1+.1:.5+Math.min(h.z/(n.a*I)*.3,.4);return w=Math.max(.3,Math.min(.95,w)),{...h,color:m?.color||q[n.plane%q.length],name:n.name,size:m?.satSize||4,alpha:w,a:n.a}}).sort((n,h)=>n.z-h.z);Je.forEach(n=>{const h=Math.floor(n.alpha*255).toString(16).padStart(2,"0");s.beginPath(),s.arc(n.x,n.y,n.size*a,0,2*Math.PI),s.fillStyle=n.color+h,s.fill(),s.strokeStyle="#ffffff"+h,s.lineWidth=.5*a,s.stroke()}),be&&(s.font=`${10*a}px sans-serif`,s.textBaseline="middle",Je.forEach(n=>{n.z>0&&(s.fillStyle=n.color+Math.floor(n.alpha*255).toString(16).padStart(2,"0"),s.fillText(n.name,n.x+(n.size+2)*a,n.y))}))};i.useEffect(()=>{He(f.current,1)},[P,g,c,D,v,M,be,je,ve,ye,Ne,j]),i.useEffect(()=>{if(!re){Q.current&&(cancelAnimationFrame(Q.current),Q.current=null);return}let e=performance.now();const a=r=>{const s=(r-e)/1e3;e=r;const o=s*de*60;Ae(x=>x+o),We(x=>(x+o*(360/86400))%360),Q.current=requestAnimationFrame(a)};return Q.current=requestAnimationFrame(a),()=>{Q.current&&cancelAnimationFrame(Q.current)}},[re,de]);const ft=()=>{if(!E.current)return;const e=document.createElement("canvas");e.width=le,e.height=le,He(e,le/800),e.toBlob(a=>{if(a){const r=URL.createObjectURL(a),s=document.createElement("a");s.href=r,s.download=`earth_${le}px.png`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)}},"image/png")},bt=e=>{e.preventDefault(),$.current=!0,b.current={x:e.clientX,y:e.clientY}},jt=e=>{if(!$.current)return;e.preventDefault();const a=e.clientX-b.current.x,r=e.clientY-b.current.y;O(s=>({x:Math.max(-Math.PI/2,Math.min(Math.PI/2,s.x-r*.005)),y:s.y+a*.005})),b.current={x:e.clientX,y:e.clientY}},Xe=()=>{$.current=!1},vt=e=>{e.preventDefault(),A(a=>Math.max(.3,Math.min(5,a*(e.deltaY>0?.9:1.1))))},yt=e=>{e.touches.length===1&&($.current=!0,b.current={x:e.touches[0].clientX,y:e.touches[0].clientY})},Mt=e=>{if(!$.current||e.touches.length!==1)return;e.preventDefault();const a=e.touches[0].clientX-b.current.x,r=e.touches[0].clientY-b.current.y;O(s=>({x:Math.max(-Math.PI/2,Math.min(Math.PI/2,s.x-r*.005)),y:s.y+a*.005})),b.current={x:e.touches[0].clientX,y:e.touches[0].clientY}},Nt=()=>{$.current=!1},Se=(e,a,r="text/plain")=>{const s=new Blob([e],{type:r}),o=URL.createObjectURL(s),x=document.createElement("a");x.href=o,x.download=a,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(o)},z="w-full px-1 py-0.5 bg-gray-800 border border-gray-600 rounded text-white text-xs",p="text-xs text-gray-400",N="px-1.5 py-0.5 rounded text-xs";return t.jsx("div",{className:"page-content",style:{maxWidth:1200,padding:0},children:t.jsxs("div",{style:{display:"flex",gap:0,minHeight:"calc(100vh - 64px)"},children:[t.jsxs("div",{ref:u,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"#0a0a1a",position:"relative",minHeight:500},children:[t.jsx("canvas",{ref:f,width:j,height:j,style:{cursor:"grab",maxWidth:"100%",maxHeight:"100%"},onMouseDown:bt,onMouseMove:jt,onMouseUp:Xe,onMouseLeave:Xe,onWheel:vt,onTouchStart:yt,onTouchMove:Mt,onTouchEnd:Nt}),t.jsx("button",{onClick:()=>st(!fe),style:{position:"absolute",top:8,left:8,background:"rgba(0,0,0,0.5)",color:"white",border:"none",padding:"4px 8px",borderRadius:4,cursor:"pointer",fontSize:12},children:fe?"â—€":"â–¶ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸"}),t.jsx("div",{style:{position:"absolute",bottom:8,right:8,color:"rgba(255,255,255,0.4)",fontSize:11},children:"ÐœÑ‹ÑˆÑŒ: Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ðµ | ÐšÐ¾Ð»ÐµÑÐ¾: Ð¼Ð°ÑÑˆÑ‚Ð°Ð±"})]}),fe&&t.jsxs("div",{style:{width:260,background:"#111827",color:"white",padding:8,overflowY:"auto",maxHeight:"calc(100vh - 64px)",fontSize:12},children:[t.jsx("div",{className:"flex gap-1 mb-2",children:["view","kepler","export","import"].map(e=>t.jsx("button",{onClick:()=>oe(e),className:`${N} flex-1 ${Y===e?"bg-blue-600":"bg-gray-700"}`,children:e==="view"?"3D":e==="kepler"?"Ð¢Ð°Ð±Ð».":e==="export"?"ðŸ“¤":"ðŸ“¥"},e))}),Y==="view"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-2",children:[t.jsx("input",{type:"file",ref:Oe,accept:"image/*",onChange:ht,className:"hidden"}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>Oe.current?.click(),className:`${N} bg-blue-600 flex-1`,children:G?"âœ“ Ð¢ÐµÐºÑÑ‚ÑƒÑ€Ð°":"ðŸ“ Ð¢ÐµÐºÑÑ‚ÑƒÑ€Ð°"}),G&&t.jsx("button",{onClick:()=>{Z(null);const e=new Image;e.onload=()=>{const a=document.createElement("canvas");a.width=e.width,a.height=e.height,a.getContext("2d").drawImage(e,0,0),E.current=a.getContext("2d").getImageData(0,0,e.width,e.height)},e.src="/eo_services/earth_texture.jpg"},className:`${N} bg-gray-600`,children:"âœ•"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-1 mb-2",children:[t.jsxs("div",{children:[t.jsxs("label",{className:p,children:["â˜€ï¸ ",D,"Â°"]}),t.jsx("input",{type:"range",min:"0",max:"360",value:D,onChange:e=>ae(+e.target.value),className:"w-full"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:p,children:["â†• ",v,"Â°"]}),t.jsx("input",{type:"range",min:"-90",max:"90",value:v,onChange:e=>tt(+e.target.value),className:"w-full"})]})]}),t.jsxs("div",{className:"flex gap-1 mb-2",children:[t.jsxs("select",{value:le,onChange:e=>at(+e.target.value),className:`${z} flex-1`,children:[t.jsx("option",{value:1024,children:"1K"}),t.jsx("option",{value:2048,children:"2K"}),t.jsx("option",{value:4096,children:"4K"}),t.jsx("option",{value:8192,children:"8K"})]}),t.jsx("button",{onClick:ft,className:`${N} bg-green-600`,children:"ðŸ“·"})]}),t.jsxs("label",{className:"flex items-center gap-2 mb-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:be,onChange:e=>nt(e.target.checked),className:"w-4 h-4"}),t.jsx("span",{className:p,children:"ÐŸÐ¾Ð´Ð¿Ð¸ÑÐ¸ ÐšÐ"})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-1 mb-2",children:[t.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:je,onChange:e=>ct(e.target.checked),className:"w-3 h-3"}),t.jsx("span",{className:p,style:{color:"#ffff00"},children:"Ð­ÐºÐ²Ð°Ñ‚Ð¾Ñ€"})]}),t.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:ve,onChange:e=>ot(e.target.checked),className:"w-3 h-3"}),t.jsx("span",{className:p,style:{color:"#ff4444"},children:"ÐœÐµÑ€Ð¸Ð´Ð¸Ð°Ð½"})]}),t.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:ye,onChange:e=>lt(e.target.checked),className:"w-3 h-3"}),t.jsx("span",{className:p,children:"ÐžÑÐ¸ XYZ"})]})]}),t.jsxs("div",{className:"border-t border-gray-600 pt-2 mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"font-semibold text-xs",children:"ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ñ"}),t.jsx("button",{onClick:()=>rt(!re),className:`${N} ${re?"bg-red-600":"bg-green-600"}`,children:re?"â¹":"â–¶"}),t.jsx("button",{onClick:()=>{Ae(0),We(0)},className:`${N} bg-gray-600`,children:"â†º"})]}),t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:p,children:"Ð¡ÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ:"}),t.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:de,onChange:e=>it(+e.target.value),className:"flex-1"}),t.jsxs("span",{className:p,children:[de,"x"]})]}),t.jsxs("div",{className:`${p} mt-1`,children:["T: ",Math.floor(Me/60),"Ð¼Ð¸Ð½ | Ð—ÐµÐ¼Ð»Ñ: ",Ne.toFixed(1),"Â°"]}),c[l]&&(()=>{const e=(c[l].hp+c[l].ha)/2+k;return t.jsxs("div",{className:`${p} mt-1 bg-black/30 p-1 rounded`,children:[t.jsxs("div",{children:["v = ",Ie(e).toFixed(2)," ÐºÐ¼/Ñ"]}),t.jsxs("div",{children:["T = ",(Te(e)/60).toFixed(1)," Ð¼Ð¸Ð½"]})]})})()]}),t.jsxs("div",{className:"border-t border-gray-600 pt-2 mb-2",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsxs("span",{className:"font-semibold",children:["ÐŸÐ»Ð¾ÑÐºÐ¾ÑÑ‚Ð¸ (",c.length,")"]}),t.jsxs("div",{className:"flex gap-0.5",children:[t.jsx("button",{onClick:mt,className:`${N} bg-gray-600`,title:"Ð Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»Ð¸Ñ‚ÑŒ RAAN",children:"âŸ³"}),t.jsx("button",{onClick:xt,className:`${N} bg-blue-600`,children:"+"})]})]}),t.jsx("div",{className:"flex flex-wrap gap-0.5 mb-1",children:c.map((e,a)=>t.jsx("button",{onClick:()=>_(a),className:`${N} ${l===a?"ring-1 ring-white":""}`,style:{backgroundColor:e.color,minWidth:"24px"},children:a+1},a))}),c[l]&&t.jsxs("div",{className:"bg-black/30 p-1 rounded",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsxs("span",{children:["P",l+1]}),t.jsxs("div",{className:"flex gap-1 items-center",children:[t.jsx("input",{type:"color",value:c[l].color,onChange:e=>R(l,"color",e.target.value),className:"w-4 h-4 rounded cursor-pointer"}),t.jsx("button",{onClick:()=>ut(l),className:`${N} bg-red-600`,children:"âœ•"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-1 mb-1",children:[t.jsxs("div",{children:[t.jsxs("label",{className:p,children:["Ð›Ð¸Ð½Ð¸Ñ ",c[l].orbitWidth||1]}),t.jsx("input",{type:"range",min:"0.5",max:"5",step:"0.5",value:c[l].orbitWidth||1,onChange:e=>R(l,"orbitWidth",+e.target.value),className:"w-full"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:p,children:["Ð¢Ð¾Ñ‡ÐºÐ° ",c[l].satSize||4]}),t.jsx("input",{type:"range",min:"2",max:"12",step:"1",value:c[l].satSize||4,onChange:e=>R(l,"satSize",+e.target.value),className:"w-full"})]})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-1",children:[t.jsxs("div",{children:[t.jsx("label",{className:p,children:"Hp"}),t.jsx("input",{type:"number",value:c[l].hp,onChange:e=>R(l,"hp",+e.target.value),className:z})]}),t.jsxs("div",{children:[t.jsx("label",{className:p,children:"Ha"}),t.jsx("input",{type:"number",value:c[l].ha,onChange:e=>R(l,"ha",+e.target.value),className:z})]}),t.jsxs("div",{children:[t.jsx("label",{className:p,children:"iÂ°"}),t.jsx("input",{type:"number",value:c[l].inc,onChange:e=>R(l,"inc",+e.target.value),className:z})]}),t.jsxs("div",{children:[t.jsx("label",{className:p,children:"Î©Â°"}),t.jsx("input",{type:"number",value:c[l].raan,onChange:e=>R(l,"raan",+e.target.value),className:z})]}),t.jsxs("div",{children:[t.jsx("label",{className:p,children:"Ï‰Â°"}),t.jsx("input",{type:"number",value:c[l].argp,onChange:e=>R(l,"argp",+e.target.value),className:z})]}),t.jsxs("div",{children:[t.jsx("label",{className:p,children:"e"}),t.jsx("input",{type:"number",step:"0.001",value:c[l].ecc,onChange:e=>R(l,"ecc",+e.target.value),className:z})]}),t.jsxs("div",{children:[t.jsx("label",{className:p,children:"N"}),t.jsx("input",{type:"number",min:"1",value:c[l].sats,onChange:e=>R(l,"sats",+e.target.value),className:z})]}),t.jsxs("div",{children:[t.jsx("label",{className:p,children:"Ï†Â°"}),t.jsx("input",{type:"number",value:c[l].phaseOffset,onChange:e=>R(l,"phaseOffset",+e.target.value),className:z})]})]}),t.jsxs("div",{className:"mt-1",children:[t.jsx("label",{className:p,children:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ñ ÐšÐ (Ñ‡ÐµÑ€ÐµÐ· Ð·Ð°Ð¿ÑÑ‚ÑƒÑŽ)"}),t.jsx("input",{type:"text",value:(c[l].satNames||[]).join(", "),onChange:e=>R(l,"satNames",e.target.value.split(",").map(a=>a.trim()).filter(a=>a)),placeholder:"SAT-1, SAT-2...",className:z})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[t.jsxs("div",{children:[t.jsx("label",{className:p,children:"F"}),t.jsx("input",{type:"number",value:F.phaseF,onChange:e=>K({...F,phaseF:+e.target.value}),className:z})]}),t.jsxs("div",{className:"text-gray-400 flex items-end pb-1",children:["ÐšÐ: ",gt]})]})]}),Y==="kepler"&&t.jsx("div",{className:"max-h-60 overflow-auto",children:t.jsxs("table",{className:"w-full text-xs",children:[t.jsx("thead",{className:"bg-gray-700 sticky top-0",children:t.jsxs("tr",{children:[t.jsx("th",{children:"ÐšÐ"}),t.jsx("th",{children:"a"}),t.jsx("th",{children:"i"}),t.jsx("th",{children:"v ÐºÐ¼/Ñ"}),t.jsx("th",{children:"T Ð¼Ð¸Ð½"})]})}),t.jsx("tbody",{children:P.map(e=>t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("td",{style:{color:c[e.plane]?.color},children:e.name}),t.jsx("td",{children:e.a.toFixed(0)}),t.jsx("td",{children:e.i.toFixed(1)}),t.jsx("td",{children:Ie(e.a).toFixed(2)}),t.jsx("td",{children:(Te(e.a)/60).toFixed(1)})]},e.name))})]})}),Y==="export"&&t.jsxs("div",{children:[t.jsx("div",{className:"max-h-64 overflow-auto bg-black/30 p-1 rounded font-mono text-xs mb-2",children:Ue.map((e,a)=>t.jsxs("div",{className:"mb-1",children:[t.jsx("div",{style:{color:c[P[a]?.plane]?.color},children:P[a]?.name}),t.jsx("div",{className:"text-gray-400 break-all",children:e.line1}),t.jsx("div",{className:"text-gray-400 break-all",children:e.line2})]},a))}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("button",{onClick:()=>Se(Ue.map((e,a)=>`${P[a].name}
${e.line1}
${e.line2}`).join(`

`),"constellation.tle"),className:`${N} bg-blue-600 w-full`,children:"ðŸ“„ Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ TLE"}),t.jsx("button",{onClick:()=>Se(pt,"constellation.e"),className:`${N} bg-blue-600 w-full`,children:"ðŸ“„ Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ STK (.e)"}),t.jsx("button",{onClick:()=>{const e=`Name,a_km,e,i_deg,RAAN_deg,ArgP_deg,MA_deg,V_kms,T_min,X_km,Y_km,Z_km
`+P.map(a=>`${a.name},${a.a.toFixed(2)},${a.e.toFixed(6)},${a.i.toFixed(2)},${a.raan.toFixed(2)},${a.argp.toFixed(2)},${a.ma.toFixed(2)},${Ie(a.a).toFixed(3)},${(Te(a.a)/60).toFixed(2)},${a.eci.x.toFixed(2)},${a.eci.y.toFixed(2)},${a.eci.z.toFixed(2)}`).join(`
`);Se(e,"constellation.csv","text/csv")},className:`${N} bg-blue-600 w-full`,children:"ðŸ“„ Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ CSV"})]})]}),Y==="import"&&t.jsxs("div",{children:[t.jsx("div",{className:"text-gray-400 mb-2 text-xs",children:"Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ TLE"}),t.jsx("input",{type:"file",ref:Ye,accept:".tle,.txt",onChange:dt,className:"hidden"}),t.jsx("button",{onClick:()=>Ye.current?.click(),className:`${N} bg-blue-600 w-full mb-2`,children:"ðŸ“ Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ TLE Ñ„Ð°Ð¹Ð»"}),t.jsx("div",{className:"text-gray-400 mb-1 text-xs",children:"Ð¸Ð»Ð¸ Ð²ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ TLE:"}),t.jsx("textarea",{value:De,onChange:e=>Le(e.target.value),placeholder:`ISS (ZARYA)
1 25544U 98067A...
2 25544...`,className:"w-full h-32 bg-black/50 border border-gray-600 rounded p-1 text-xs font-mono text-white resize-none"}),t.jsx("button",{onClick:()=>_e(De),className:`${N} bg-green-600 w-full mt-1`,children:"Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ"})]})]})]})})}export{zt as default};
