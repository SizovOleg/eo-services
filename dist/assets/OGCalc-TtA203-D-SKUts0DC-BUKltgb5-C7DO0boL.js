import{b as w,q as e}from"./index-kQhqao1P.js";const y=6371e3,z=3986004418e5,B=72921159e-12,J=86164.0905;function c({label:s,value:t,onChange:a,unit:i,step:l}){return e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm text-gray-600",children:s}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"number",step:l||"any",value:t,onChange:function(o){a(parseFloat(o.target.value)||0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),i&&e.jsx("span",{className:"text-sm text-gray-500 w-16",children:i})]})]})}function x({label:s,value:t,unit:a}){return e.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100",children:[e.jsx("span",{className:"text-gray-600",children:s}),e.jsxs("span",{className:"font-medium",children:[t," ",e.jsx("span",{className:"text-gray-500 text-sm",children:a})]})]})}function $(s,t,a,i){var l=Math.floor(a/60),o=Math.floor(a%60),r=i.split("-"),n=parseInt(r[0]),d=parseInt(r[1])-1,_=parseInt(r[2]),m=new Date(n,d,_,l,o,0),p=Math.PI/180,F=1e3*60*60*24,M=2440588,f=2451545,D=m.valueOf()/F-.5+M,b=D-f,N=p*23.4397,h=p*(357.5291+.98560028*b),S=p*(1.9148*Math.sin(h)+.02*Math.sin(2*h)+3e-4*Math.sin(3*h)),O=p*102.9372,u=h+S+O+Math.PI,k=Math.asin(Math.sin(u)*Math.sin(N)),H=Math.atan2(Math.sin(u)*Math.cos(N),Math.cos(u)),I=p*-40,P=p*(280.16+360.9856235*b)-I,C=P-H,g=p*s,v=Math.sin(g)*Math.sin(k)+Math.cos(g)*Math.cos(k)*Math.cos(C);return Math.asin(v)/p}function ie(s){var t=Math.floor(s/60),a=Math.floor(s%60),i=Math.floor(s%1*60);return t.toString().padStart(2,"0")+":"+a.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0")}function G(s,t){var a=t*1440/360,i=720;if(s===1)return[i];var l=[],o=[];if(s%2!==0)for(var r=s/2-.5,n=1;n<=r;n++)o.push(i+a*n),l.push(i-a*n);else{for(var r=s/2,n=1;n<=r;n++)o.push(i+a*n),l.push(i-a*n);l.pop()}return l.reverse(),l.concat([i],o)}function Y(s){for(var t=y+s*1e3,a=2*Math.PI*Math.sqrt(Math.pow(t,3)/z),i=a/J,l=1,o=1,r=1;r<=200;r++){var n=Math.round(r*i);if(n!==0){l=r,o=n;var d=Math.abs(r*a-n*J)/J*360;if(d<.05)return[r,n,r*a/86400]}}return[l,o,l*a/86400]}function ee(s){for(var t=s.n_op,a=s.n_sats,i=s.rasst,l=s.H,o=s.lat_deg,r=s.W,n=s.alpha,d=s.sun_angle,_=s.startDate||"2025-03-21",m=2*Math.PI*Math.sqrt(Math.pow(y+l*1e3,3)/z),p=B*m,F=y/1e3*p,M=F*Math.cos(o*Math.PI/180),f=y*2*Math.PI,D=i*f/360/1e3,b=111.3*Math.cos(o*Math.PI/180)*i,N=n===0?r:2*l*Math.tan(n*Math.PI/180),h=Y(l),S=G(t,i),O=[],u=0;u<S.length;u++){var k=S[u],H=$(o,40,k,_),I;d===-90?I=1:H>d?I=.5:I=0,O.push({num:u+1,time:k,sunAlt:H,DOL_sun:I})}for(var P=0,u=0;u<O.length;u++)O[u].DOL_sun===0&&P++;var C=t*a*r,g="";if(P===t)g="0 сут";else if(P===0){var v=M/C/.5;v<h[1]?g=v.toFixed(2)+" сут":v<2*h[1]?g=(h[1]*100/v).toFixed(2)+"%":g=(2*h[1]*100/v).toFixed(2)+"%"}else{var v=M/(a*r*(t-P))/.5;v<h[1]?g=v.toFixed(2)+" сут":v<2*h[1]?g=(h[1]*100/v).toFixed(2)+"%":g=(2*h[1]*100/v).toFixed(2)+"%"}for(var R=2*N*a*t/M,L=0,u=0;u<O.length;u++)L+=R/t*O[u].DOL_sun;return{T:(m/60).toFixed(2),d_lat:M.toFixed(2),d_lat_eq:F.toFixed(2),l_lat_OP:b.toFixed(2),l_OP:D.toFixed(2),W_obzor:N.toFixed(1),rep_cycle:h[1],POKR:g,OPER:L.toFixed(2),op_info:O,ZERO:P}}function re(s){for(var t=ee(s),a=s.startDate||"2025-03-21",i=s.n_op,l=s.n_sats,o=s.W,r=s.H,n=s.alpha,d=s.sun_angle,_=s.lat_deg,m=s.rasst,p=2*Math.PI*Math.sqrt(Math.pow(y+r*1e3,3)/z),F=B*p,M=y/1e3*F,f=M*Math.cos(_*Math.PI/180),D=n===0?o:2*r*Math.tan(n*Math.PI/180),b=Y(r),N=i*l*o,h=i*l*D,S=t.ZERO,O=t.op_info,u=G(i,m),k=a.split("-"),H=parseInt(k[0]),I=parseInt(k[1])-1,P=parseInt(k[2]),C=[],g=0;g<10;g++){var v=Math.round((g+1)*b[1]),R=new Date(H,I,P);R.setDate(R.getDate()+v);for(var L=R.getFullYear()+"-"+String(R.getMonth()+1).padStart(2,"0")+"-"+String(R.getDate()).padStart(2,"0"),Z=0;Z<u.length;Z++){var ae=$(_,40,u[Z],L),K;d===-90?K=1:ae>d?K=.5:K=0,C.push(K)}}var ne=C.length>0?C[0]:0,A="",j=[];if(S===i)A="0 сут";else{var W;if(i===1?W=f/N/O[0].DOL_sun:S===0?W=f/N/.5:W=f/(l*o*(i-S))/.5,W<b[1])A=W.toFixed(2)+" сут";else{var T;W<2*b[1]?T=b[1]*100/W:T=2*b[1]*100/W,A=T.toFixed(2)+"%";var q=f-T/100*f;if(j.push("Осталось покрыть на заданной широте: "+q.toFixed(2)+" км"),n!==0&&ne!==0){for(var V=Math.floor(q/N/b[1]),Q=q/N-V*b[1],X=C.slice(0,Math.min(V+1,C.length)),E=-1,U=0;U<X.length;U++)if(X[U]===0){E=U;break}if(q/h<=1)j.push("Возможно достижение полного покрытия"),E===-1?j.push("Полное покрытие ещё за "+(b[1]*V+Q).toFixed(2)+" сут"):j.push("Солнце ушло через "+E+" периода кратности");else{j.push("Полное покрытие не может быть достигнуто");var le=100-(q-h)/f*100;j.push("Макс. покрытие: "+le.toFixed(2)+"%"),E===-1?j.push("Макс. покрытие ещё за "+(b[1]*V+Q).toFixed(2)+" сут"):j.push("Солнце ушло через "+E+" периода кратности")}}else n===0?(j.push("Нет отклонения по углу визирования"),j.push("Полное покрытие невозможно")):(j.push("Солнце ниже заявленной границы"),j.push("Дальнейшее покрытие невозможно"))}}return{T:t.T,d_lat:t.d_lat,d_lat_eq:t.d_lat_eq,l_lat_OP:t.l_lat_OP,l_OP:t.l_OP,W_obzor:t.W_obzor,rep_cycle:t.rep_cycle,OPER:t.OPER,op_info:t.op_info,ZERO:t.ZERO,POKR:A,additionalInfo:j}}function te({params:s,setParams:t}){return e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(c,{label:"Число ОП",value:s.n_op,onChange:function(a){t(Object.assign({},s,{n_op:a}))},unit:"шт",step:"1"}),e.jsx(c,{label:"Число КА в ОП",value:s.n_sats,onChange:function(a){t(Object.assign({},s,{n_sats:a}))},unit:"шт",step:"1"}),e.jsx(c,{label:"Разнесение ОП",value:s.rasst,onChange:function(a){t(Object.assign({},s,{rasst:a}))},unit:"°"}),e.jsx(c,{label:"Высота орбиты",value:s.H,onChange:function(a){t(Object.assign({},s,{H:a}))},unit:"км"}),e.jsx(c,{label:"Широта съёмки",value:s.lat_deg,onChange:function(a){t(Object.assign({},s,{lat_deg:a}))},unit:"°"}),e.jsx(c,{label:"Полоса захвата",value:s.W,onChange:function(a){t(Object.assign({},s,{W:a}))},unit:"км"}),e.jsx(c,{label:"Угол визирования",value:s.alpha,onChange:function(a){t(Object.assign({},s,{alpha:a}))},unit:"°"}),e.jsx(c,{label:"Мин. высота Солнца",value:s.sun_angle,onChange:function(a){t(Object.assign({},s,{sun_angle:a}))},unit:"°"})]})}function se({results:s}){return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-2 text-gray-800",children:"Орбитальные плоскости"}),e.jsx("div",{className:"space-y-1 text-sm",children:s.op_info.map(function(t){return e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["ОП ",t.num,": ",ie(t.time)]}),e.jsxs("span",{className:t.DOL_sun===0?"text-red-600":"text-green-600",children:["Солнце: ",t.sunAlt.toFixed(2),"°"]})]},t.num)})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-1",children:[e.jsx("h3",{className:"font-semibold mb-3 text-gray-800",children:"Параметры"}),e.jsx(x,{label:"Межвиток на широте",value:s.d_lat,unit:"км"}),e.jsx(x,{label:"Межвиток на экваторе",value:s.d_lat_eq,unit:"км"}),e.jsx(x,{label:"Расстояние между ОП (широта)",value:s.l_lat_OP,unit:"км"}),e.jsx(x,{label:"Расстояние между ОП (экватор)",value:s.l_OP,unit:"км"}),e.jsx(x,{label:"Полоса обзора",value:s.W_obzor,unit:"км"}),e.jsx(x,{label:"Кратность орбиты",value:s.rep_cycle,unit:""}),e.jsx(x,{label:"ОП ниже угла Солнца",value:s.ZERO,unit:"шт"})]})]})}function oe(){var s=w.useState({n_op:2,n_sats:4,rasst:10,H:500,lat_deg:55,W:20,alpha:0,sun_angle:10,startDate:"2025-03-21"}),t=s[0],a=s[1],i=w.useState(null),l=i[0],o=i[1];function r(){o(re(t))}return e.jsxs("div",{className:"space-y-6",children:[e.jsx(te,{params:t,setParams:a}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Дата начала съёмки"}),e.jsx("input",{type:"date",value:t.startDate,onChange:function(n){a(Object.assign({},t,{startDate:n.target.value}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("button",{onClick:r,style:{width:"100%",padding:"12px",background:"#2563eb",color:"white",borderRadius:8,border:"none",cursor:"pointer",fontWeight:600,fontSize:15},children:"Рассчитать"}),l&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(se,{results:l}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-3 text-gray-800",children:"Результат"}),e.jsx(x,{label:"Итоговое покрытие",value:l.POKR,unit:""}),l.additionalInfo&&l.additionalInfo.length>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-green-200",children:l.additionalInfo.map(function(n,d){return e.jsx("p",{className:"text-sm text-gray-600 py-1",children:n},d)})})]})]})]})}function ce(){var s=w.useState({n_op:2,n_sats:4,rasst:10,H:500,lat_deg:55,W:20,alpha:0,sun_angle:10,startDate:"2025-03-21"}),t=s[0],a=s[1],i=w.useState(null),l=i[0],o=i[1];function r(){o(ee(t))}return e.jsxs("div",{className:"space-y-6",children:[e.jsx(te,{params:t,setParams:a}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Дата съёмки"}),e.jsx("input",{type:"date",value:t.startDate,onChange:function(n){a(Object.assign({},t,{startDate:n.target.value}))},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("button",{onClick:r,style:{width:"100%",padding:"12px",background:"#4f46e5",color:"white",borderRadius:8,border:"none",cursor:"pointer",fontWeight:600,fontSize:15},children:"Рассчитать"}),l&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(se,{results:l}),e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold mb-3 text-gray-800",children:"Результат"}),e.jsx(x,{label:"Оперативность на широте",value:l.OPER,unit:"раз/сут"})]})]})]})}function ue(){var s=w.useState({n_sats:4,H:500,v_zapis:2,n_vitkov_work:7,t_vitok:10,VRL:300,t_sbros_dlit:8}),t=s[0],a=s[1],i=w.useState(null),l=i[0],o=i[1];function r(){var n=2*Math.PI*Math.sqrt(Math.pow(y+t.H*1e3,3)/z),d=t.t_vitok*t.v_zapis*t.n_sats*t.n_vitkov_work,_=d*1e3/(t.VRL*60),m=_/t.t_sbros_dlit;o({T:(n/60).toFixed(2),V:(d/8).toFixed(2),t_sbros:_.toFixed(2),n_sbros:m.toFixed(2)})}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(c,{label:"Число КА в ОГ",value:t.n_sats,onChange:function(n){a(Object.assign({},t,{n_sats:n}))},unit:"шт",step:"1"}),e.jsx(c,{label:"Высота орбиты",value:t.H,onChange:function(n){a(Object.assign({},t,{H:n}))},unit:"км"}),e.jsx(c,{label:"Скорость записи в БЗУ",value:t.v_zapis,onChange:function(n){a(Object.assign({},t,{v_zapis:n}))},unit:"Гбит/с"}),e.jsx(c,{label:"Рабочих витков в сутки",value:t.n_vitkov_work,onChange:function(n){a(Object.assign({},t,{n_vitkov_work:n}))},unit:"шт",step:"1"}),e.jsx(c,{label:"Время работы на витке",value:t.t_vitok,onChange:function(n){a(Object.assign({},t,{t_vitok:n}))},unit:"мин"}),e.jsx(c,{label:"Скорость ВРЛ",value:t.VRL,onChange:function(n){a(Object.assign({},t,{VRL:n}))},unit:"Мбит/с"}),e.jsx(c,{label:"Длительность сброса",value:t.t_sbros_dlit,onChange:function(n){a(Object.assign({},t,{t_sbros_dlit:n}))},unit:"мин"})]}),e.jsx("button",{onClick:r,style:{width:"100%",padding:"12px",background:"#16a34a",color:"white",borderRadius:8,border:"none",cursor:"pointer",fontWeight:600,fontSize:15},children:"Рассчитать"}),l&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-1",children:[e.jsx("h3",{className:"font-semibold mb-3 text-gray-800",children:"Результаты"}),e.jsx(x,{label:"Период обращения",value:l.T,unit:"мин"}),e.jsx(x,{label:"Объём данных за сутки",value:l.V,unit:"Гбайт"}),e.jsx(x,{label:"Время сброса за сутки",value:l.t_sbros,unit:"мин"}),e.jsx(x,{label:"Число сеансов сброса",value:l.n_sbros,unit:"шт"})]})]})}function de(){var s=w.useState({n_sats:4,H:500,W:20,N_vit:7,t_vitok:10,days:30}),t=s[0],a=s[1],i=w.useState(null),l=i[0],o=i[1];function r(){var n=2*Math.PI*Math.sqrt(Math.pow(y+t.H*1e3,3)/z),d=86400/n,_=Math.sqrt(z/(y+t.H*1e3)),m=_/1e3*y/1e3/(y/1e3+t.H),p=Math.min(t.N_vit,d),F=Math.min(t.t_vitok,n/60),M=m*F*60*p,f=M*t.n_sats*t.W*t.days;o({T:(n/60).toFixed(2),v_podsputnik:m.toFixed(2),n_vitkov:d.toFixed(2),km2:Math.round(f).toLocaleString("ru-RU")})}return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(c,{label:"Число КА в ОГ",value:t.n_sats,onChange:function(n){a(Object.assign({},t,{n_sats:n}))},unit:"шт",step:"1"}),e.jsx(c,{label:"Высота орбиты",value:t.H,onChange:function(n){a(Object.assign({},t,{H:n}))},unit:"км"}),e.jsx(c,{label:"Полоса захвата",value:t.W,onChange:function(n){a(Object.assign({},t,{W:n}))},unit:"км"}),e.jsx(c,{label:"Число витков съёмки",value:t.N_vit,onChange:function(n){a(Object.assign({},t,{N_vit:n}))},unit:"шт",step:"1"}),e.jsx(c,{label:"Время съёмки на витке",value:t.t_vitok,onChange:function(n){a(Object.assign({},t,{t_vitok:n}))},unit:"мин"}),e.jsx(c,{label:"Период съёмки",value:t.days,onChange:function(n){a(Object.assign({},t,{days:n}))},unit:"сут",step:"1"})]}),e.jsx("button",{onClick:r,style:{width:"100%",padding:"12px",background:"#7c3aed",color:"white",borderRadius:8,border:"none",cursor:"pointer",fontWeight:600,fontSize:15},children:"Рассчитать"}),l&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-1",children:[e.jsx("h3",{className:"font-semibold mb-3 text-gray-800",children:"Результаты"}),e.jsx(x,{label:"Период обращения",value:l.T,unit:"мин"}),e.jsx(x,{label:"Скорость подспутниковой точки",value:l.v_podsputnik,unit:"км/с"}),e.jsx(x,{label:"Витков в сутки",value:l.n_vitkov,unit:"шт"}),e.jsx(x,{label:"Производительность",value:l.km2,unit:"км²"})]})]})}function xe(){var s=w.useState(0),t=s[0],a=s[1],i=["Покрытие","Оперативн.","Инф. потоки","Производит."];return e.jsxs("div",{className:"page-content",style:{maxWidth:640},children:[e.jsxs("div",{className:"service-header",children:[e.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 36 36",fill:"none",children:[e.jsx("circle",{cx:"18",cy:"18",r:"14",stroke:"var(--accent)",strokeWidth:"1.5",strokeDasharray:"4 3"}),e.jsx("circle",{cx:"18",cy:"18",r:"3",fill:"var(--accent)"}),e.jsx("circle",{cx:"18",cy:"6",r:"2",fill:"var(--accent)"}),e.jsx("circle",{cx:"18",cy:"30",r:"2",fill:"var(--accent)"})]}),e.jsx("h1",{children:"Калькулятор ОГ"})]}),e.jsxs("div",{className:"card",style:{padding:0,overflow:"hidden"},children:[e.jsx("div",{className:"flex border-b",children:i.map(function(l,o){return e.jsx("button",{onClick:function(){a(o)},className:"flex-1 py-3 text-xs font-medium transition "+(t===o?"text-blue-600 border-b-2 border-blue-600 bg-blue-50":"text-gray-500 hover:text-gray-700"),children:l},o)})}),e.jsxs("div",{className:"p-5",children:[t===0&&e.jsx(oe,{}),t===1&&e.jsx(ce,{}),t===2&&e.jsx(ue,{}),t===3&&e.jsx(de,{})]})]})]})}export{xe as default};
