import{b as o,q as t}from"./index-kQhqao1P.js";const V=398600.4418,C=6371;function Qe(m,d,f,u,y,O){const N=f*Math.PI/180,L=u*Math.PI/180,k=y*Math.PI/180,b=O*Math.PI/180,I=m*(1-d*d),l=I/(1+d*Math.cos(b)),z=l*Math.cos(b),$=l*Math.sin(b),he=Math.sqrt(V*I),U=-V/he*Math.sin(b),le=V/he*(d+Math.cos(b)),i=Math.cos(L),_=Math.sin(L),B=Math.cos(k),K=Math.sin(k),D=Math.cos(N),te=Math.sin(N),j=[[i*B-_*K*D,-i*K-_*B*D,_*te],[_*B+i*K*D,-_*K+i*B*D,-i*te],[K*te,B*te,D]];return{x:j[0][0]*z+j[0][1]*$,y:j[2][0]*z+j[2][1]*$,z:j[1][0]*z+j[1][1]*$,vx:j[0][0]*U+j[0][1]*le,vy:j[2][0]*U+j[2][1]*le,vz:j[1][0]*U+j[1][1]*le,r:l}}function Ct(m,d,f){const u=d.getUTCFullYear()%100,y=new Date(Date.UTC(d.getUTCFullYear(),0,1)),O=(d-y)/864e5+1,N=u.toString().padStart(2,"0")+O.toFixed(8).padStart(12,"0"),L=Math.sqrt(V/Math.pow(m.a,3))*86400/(2*Math.PI),k=`1 ${String(f).padStart(5,"0")}U 24001A   ${N}  .00000000  00000-0  00000-0 0  9990`,b=`2 ${String(f).padStart(5,"0")} ${m.i.toFixed(4).padStart(8)} ${(m.raan%360).toFixed(4).padStart(8)} ${m.e.toFixed(7).substring(2)} ${(m.argp%360).toFixed(4).padStart(8)} ${(m.ma%360).toFixed(4).padStart(8)} ${L.toFixed(8).padStart(11)}    0`;return{line1:k,line2:b}}function kt(m,d){let f=`stk.v.12.0
BEGIN Ephemeris
NumberOfEphemerisPoints ${m.length}
ScenarioEpoch ${d.toISOString()}
InterpolationMethod Lagrange
InterpolationOrder 5
CentralBody Earth
CoordinateSystem J2000
EphemerisTimePosVel

`;return m.forEach(u=>{f+=`0.0 ${u.eci.x*1e3} ${u.eci.y*1e3} ${u.eci.z*1e3} ${u.eci.vx*1e3} ${u.eci.vy*1e3} ${u.eci.vz*1e3}
`}),f+`
END Ephemeris`}const H=["#ff6b6b","#4ecdc4","#45b7d1","#96ceb4","#ffeaa7","#fd79a8","#a29bfe","#00b894","#e17055","#0984e3"];function Te(m){return Math.sqrt(V/m)}function Re(m){return 2*Math.PI*Math.sqrt(Math.pow(m,3)/V)}function $t(m){const d=m.trim().split(`
`).map(y=>y.trim()).filter(y=>y),f=[];let u=0;for(;u<d.length;){let y="SAT",O,N;if(d[u]&&!d[u].startsWith("1 ")&&!d[u].startsWith("2 ")&&(y=d[u],u++),u<d.length&&d[u].startsWith("1 ")&&(O=d[u],u++),u<d.length&&d[u].startsWith("2 ")&&(N=d[u],u++),O&&N)try{const L=parseFloat(N.substring(8,16).trim()),k=parseFloat(N.substring(17,25).trim()),b=parseFloat("0."+N.substring(26,33).trim()),I=parseFloat(N.substring(34,42).trim()),l=parseFloat(N.substring(43,51).trim()),z=parseFloat(N.substring(52,63).trim())*2*Math.PI/86400,$=Math.pow(V/(z*z),1/3);f.push({name:y,hp:$*(1-b)-C,ha:$*(1+b)-C,inc:L,raan:k,argp:I,ecc:b,ma:l,a:$})}catch(L){console.error("TLE parse error:",L)}}return f}function Ft(){const m=document.createElement("canvas");m.width=2048,m.height=1024;const d=m.getContext("2d"),f=d.createLinearGradient(0,0,0,1024);return f.addColorStop(0,"#0a3d62"),f.addColorStop(.3,"#2980b9"),f.addColorStop(.5,"#3498db"),f.addColorStop(.7,"#2980b9"),f.addColorStop(1,"#0a3d62"),d.fillStyle=f,d.fillRect(0,0,2048,1024),d.getImageData(0,0,2048,1024)}function zt(){const m=o.useRef(null),d=o.useRef(null),[f,u]=o.useState(800),[y,O]=o.useState({x:.4,y:0}),[N,L]=o.useState(1),k=o.useRef(!1),b=o.useRef({x:0,y:0}),I=o.useRef(null),[l,z]=o.useState([{hp:550,ha:550,inc:53,raan:0,argp:0,ecc:0,sats:8,phaseOffset:0,color:H[0],satNames:[],orbitWidth:1,satSize:4}]),[$,he]=o.useState({phaseF:1,epoch:new Date().toISOString().slice(0,16)}),[U,le]=o.useState("view"),[i,_]=o.useState(0),[B,K]=o.useState(null),[D,te]=o.useState(45),[j,et]=o.useState(0),[re,tt]=o.useState(2048),[be,at]=o.useState(!0),[je,st]=o.useState(!1),[ve,nt]=o.useState(!0),[ye,lt]=o.useState(!1),[Ne,rt]=o.useState(!1),[ie,it]=o.useState(!1),[Me,Ae]=o.useState(0),[de,ct]=o.useState(1),[Se,We]=o.useState(0),J=o.useRef(null),[Le,De]=o.useState(""),Oe=o.useRef(null),Ue=o.useRef(null);o.useEffect(()=>{const e=new Image;e.onload=()=>{const a=document.createElement("canvas");a.width=e.width,a.height=e.height;const c=a.getContext("2d");c.drawImage(e,0,0),I.current=c.getImageData(0,0,e.width,e.height)},e.onerror=()=>{I.current=Ft()},e.src="/earth_texture.jpg"},[]),o.useEffect(()=>{const e=()=>{if(d.current){const a=d.current.clientWidth,c=window.innerHeight-120;u(Math.min(a,c,900))}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const ot=e=>{const a=e.target.files?.[0];if(a){const c=new FileReader;c.onload=s=>{const r=new Image;r.onload=()=>{const x=document.createElement("canvas");x.width=r.width,x.height=r.height;const Y=x.getContext("2d");Y.drawImage(r,0,0),I.current=Y.getImageData(0,0,r.width,r.height),K(s.target.result)},r.src=s.target.result},c.readAsDataURL(a)}},ht=e=>{const a=e.target.files?.[0];if(a){const c=new FileReader;c.onload=s=>_e(s.target.result),c.readAsText(a)}},_e=e=>{const a=$t(e);if(a.length===0)return;const c={};a.forEach(r=>{const x=`${r.inc.toFixed(1)}_${Math.round(r.raan/10)*10}`;c[x]||(c[x]=[]),c[x].push(r)});const s=Object.values(c).map((r,x)=>({hp:Math.round(r[0].hp),ha:Math.round(r[0].ha),inc:r[0].inc,raan:r[0].raan,argp:r[0].argp,ecc:r[0].ecc,sats:r.length,phaseOffset:0,color:H[x%H.length],satNames:r.map(Y=>Y.name),orbitWidth:1,satSize:4}));z(s),_(0),De("")},dt=()=>{if(l.length>=10)return;const e=l[l.length-1];z([...l,{...e,raan:(e.raan+360/(l.length+1))%360,color:H[l.length%H.length],satNames:[],orbitWidth:e.orbitWidth||1,satSize:e.satSize||4}])},xt=e=>{l.length<=1||(z(l.filter((a,c)=>c!==e)),i>=l.length-1&&_(Math.max(0,l.length-2)))},E=(e,a,c)=>z(l.map((s,r)=>r===e?{...s,[a]:c}:s)),ut=()=>z(l.map((e,a)=>({...e,raan:a*360/l.length%360}))),P=o.useMemo(()=>{const e=[];return l.forEach((a,c)=>{const s=(a.hp+a.ha)/2+C,r=a.ha!==a.hp?(a.ha-a.hp)/(a.ha+a.hp+2*C):a.ecc,x=360/a.sats,Y=2*Math.PI*Math.sqrt(Math.pow(s,3)/V),R=360/Y;for(let A=0;A<a.sats;A++){const Q=(A*x+a.phaseOffset+c*$.phaseF*360/l.reduce((S,ce)=>S+ce.sats,0))%360,Z=(Q+Me*R)%360,ee=r<.01?Z:Z+2*r*Math.sin(Z*Math.PI/180)*180/Math.PI,Ce=Qe(s,r,a.inc,a.raan,a.argp,ee),q=a.satNames?.[A]||`P${c+1}-S${A+1}`;e.push({name:q,plane:c,slot:A,a:s,e:r,i:a.inc,raan:a.raan,argp:a.argp,ma:Q,nu:ee,eci:Ce,period:Y})}}),e},[l,$,Me]),xe=new Date($.epoch),mt=l.reduce((e,a)=>e+a.sats,0),Ye=o.useMemo(()=>P.map((e,a)=>Ct(e,xe,9e4+a)),[P,xe]),gt=o.useMemo(()=>kt(P,xe),[P,xe]),qe=(e,a=1,c=Se)=>{if(!e||!I.current)return;const s=e.getContext("2d"),r=e.width,x=e.height,Y=Math.max(...l.map(n=>n.ha),550),R=N*Math.min(r,x)/(2.8*(Y+C));s.fillStyle="#0a0a1a",s.fillRect(0,0,r,x);const A=Math.cos(-y.x),Q=Math.sin(-y.x),Z=Math.cos(-y.y),ee=Math.sin(-y.y),Ce=c*Math.PI/180,q=(n,h,g)=>{const X=n*Z-g*ee,F=n*ee+g*Z,W=h*A-F*Q,w=h*Q+F*A;return{x:r/2+X*R,y:x/2-W*R,z:w}},S=C*R,ce=I.current,oe=ce.width,He=ce.height,ke=ce.data,Be=D*Math.PI/180,Ke=j*Math.PI/180,Ze=Math.cos(Ke),ae={x:Math.cos(Be)*Ze,y:Math.sin(Ke),z:Math.sin(Be)*Ze},Ge=s.createImageData(r,x),ue=Ge.data;for(let n=-S;n<S;n+=1)for(let h=-S;h<S;h+=1){const g=h*h+n*n;if(g>S*S)continue;const X=Math.sqrt(S*S-g),F=h/S,W=-n/S,w=X/S,v=W*A+w*Q,ne=-W*Q+w*A,G=F*Z+ne*ee,ge=-F*ee+ne*Z,Fe=Math.asin(Math.max(-1,Math.min(1,v))),Mt=((Math.atan2(G,ge)+Ce)/Math.PI+1)/2,St=.5-Fe/Math.PI,wt=(Math.floor(Mt*oe)%oe+oe)%oe,Ie=(Math.floor(St*He)%He*oe+wt)*4,pe=G*ae.x+v*ae.y+ge*ae.z;let ze=pe>.1?.4+.6*pe:pe>-.1?.2+(pe+.1)*2:.15;const Ee=Math.floor(r/2+h),Pe=Math.floor(x/2+n);if(Ee>=0&&Ee<r&&Pe>=0&&Pe<x){const fe=(Pe*r+Ee)*4;ue[fe]=Math.floor(ke[Ie]*ze),ue[fe+1]=Math.floor(ke[Ie+1]*ze),ue[fe+2]=Math.floor(ke[Ie+2]*ze),ue[fe+3]=255}}s.putImageData(Ge,0,0);const $e=C*2,se=q(ae.x*$e,ae.y*$e,ae.z*$e);s.beginPath(),s.arc(se.x,se.y,8*a,0,2*Math.PI);const me=s.createRadialGradient(se.x,se.y,0,se.x,se.y,12*a);if(me.addColorStop(0,"#ffff88"),me.addColorStop(.5,"#ffdd44"),me.addColorStop(1,"transparent"),s.fillStyle=me,s.fill(),ve){s.beginPath(),s.strokeStyle="#ffff0066",s.lineWidth=1*a;for(let n=0;n<=360;n+=5){const h=n*Math.PI/180,g=q(C*Math.cos(h),0,C*Math.sin(h));n===0?s.moveTo(g.x,g.y):s.lineTo(g.x,g.y)}s.stroke()}if(ye){s.beginPath(),s.strokeStyle="#ff444466",s.lineWidth=1*a;for(let n=-90;n<=90;n+=5){const h=n*Math.PI/180,g=q(0,C*Math.sin(h),C*Math.cos(h));n===-90?s.moveTo(g.x,g.y):s.lineTo(g.x,g.y)}s.stroke()}if(Ne){const n=C*1.8,h=q(0,0,0);[["#ff4444aa","X",n,0,0],["#44ff44aa","Y",0,n,0],["#4444ffaa","Z",0,0,n]].forEach(([g,X,F,W,w])=>{const v=q(F,W,w);s.beginPath(),s.strokeStyle=g,s.lineWidth=2*a,s.moveTo(h.x,h.y),s.lineTo(v.x,v.y),s.stroke(),s.fillStyle=g.slice(0,7),s.font=`${12*a}px sans-serif`,s.fillText(X,v.x+5*a,v.y)})}const Ve=new Set;P.forEach(n=>{const h=`${n.plane}-${n.a.toFixed(0)}-${n.i.toFixed(1)}-${n.raan.toFixed(1)}`;if(Ve.has(h))return;Ve.add(h);const g=l[n.plane],X=g?.color||H[n.plane%H.length],F=g?.orbitWidth||1,W=[];for(let w=0;w<=360;w+=2){const v=Qe(n.a,n.e,n.i,n.raan,n.argp,w);W.push(q(v.x,v.y,v.z))}for(let w=0;w<W.length-1;w++){const v=W[w],ne=W[w+1],G=(v.z+ne.z)/2;let ge=G<0&&Math.sqrt((v.x-r/2)**2+(v.y-x/2)**2)<S*1.1?.3+G/(C*R)*.1+.1:G<0?.5+G/(n.a*R)*.1+.1:.5+Math.min(G/(n.a*R)*.3,.4);const Fe=Math.floor(Math.max(.05,Math.min(.9,ge))*255).toString(16).padStart(2,"0");s.beginPath(),s.strokeStyle=X+Fe,s.lineWidth=F*a,s.moveTo(v.x,v.y),s.lineTo(ne.x,ne.y),s.stroke()}});const Je=P.map(n=>{const h=q(n.eci.x,n.eci.y,n.eci.z),g=l[n.plane],X=Math.sqrt((h.x-r/2)**2+(h.y-x/2)**2);let F=h.z<0&&X<S*1.05?.3+h.z/(n.a*R)*.1+.1:h.z<0?.5+h.z/(n.a*R)*.1+.1:.5+Math.min(h.z/(n.a*R)*.3,.4);return F=Math.max(.3,Math.min(.95,F)),{...h,color:g?.color||H[n.plane%H.length],name:n.name,size:g?.satSize||4,alpha:F,a:n.a}}).sort((n,h)=>n.z-h.z);Je.forEach(n=>{const h=Math.floor(n.alpha*255).toString(16).padStart(2,"0");s.beginPath(),s.arc(n.x,n.y,n.size*a,0,2*Math.PI),s.fillStyle=n.color+h,s.fill(),s.strokeStyle="#ffffff"+h,s.lineWidth=.5*a,s.stroke()}),je&&(s.font=`${10*a}px sans-serif`,s.textBaseline="middle",Je.forEach(n=>{n.z>0&&(s.fillStyle=n.color+Math.floor(n.alpha*255).toString(16).padStart(2,"0"),s.fillText(n.name,n.x+(n.size+2)*a,n.y))}))};o.useEffect(()=>{qe(m.current,1)},[P,y,l,D,j,N,je,ve,ye,Ne,Se,f]),o.useEffect(()=>{if(!ie){J.current&&(cancelAnimationFrame(J.current),J.current=null);return}let e=performance.now();const a=c=>{const s=(c-e)/1e3;e=c;const r=s*de*60;Ae(x=>x+r),We(x=>(x+r*(360/86400))%360),J.current=requestAnimationFrame(a)};return J.current=requestAnimationFrame(a),()=>{J.current&&cancelAnimationFrame(J.current)}},[ie,de]);const pt=()=>{if(!I.current)return;const e=document.createElement("canvas");e.width=re,e.height=re,qe(e,re/800),e.toBlob(a=>{if(a){const c=URL.createObjectURL(a),s=document.createElement("a");s.href=c,s.download=`earth_${re}px.png`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(c)}},"image/png")},ft=e=>{e.preventDefault(),k.current=!0,b.current={x:e.clientX,y:e.clientY}},bt=e=>{if(!k.current)return;e.preventDefault();const a=e.clientX-b.current.x,c=e.clientY-b.current.y;O(s=>({x:Math.max(-Math.PI/2,Math.min(Math.PI/2,s.x-c*.005)),y:s.y+a*.005})),b.current={x:e.clientX,y:e.clientY}},Xe=()=>{k.current=!1},jt=e=>{e.preventDefault(),L(a=>Math.max(.3,Math.min(5,a*(e.deltaY>0?.9:1.1))))},vt=e=>{e.touches.length===1&&(k.current=!0,b.current={x:e.touches[0].clientX,y:e.touches[0].clientY})},yt=e=>{if(!k.current||e.touches.length!==1)return;e.preventDefault();const a=e.touches[0].clientX-b.current.x,c=e.touches[0].clientY-b.current.y;O(s=>({x:Math.max(-Math.PI/2,Math.min(Math.PI/2,s.x-c*.005)),y:s.y+a*.005})),b.current={x:e.touches[0].clientX,y:e.touches[0].clientY}},Nt=()=>{k.current=!1},we=(e,a,c="text/plain")=>{const s=new Blob([e],{type:c}),r=URL.createObjectURL(s),x=document.createElement("a");x.href=r,x.download=a,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(r)},T="w-full px-1 py-0.5 bg-gray-800 border border-gray-600 rounded text-white text-xs",p="text-xs text-gray-400",M="px-1.5 py-0.5 rounded text-xs";return t.jsx("div",{className:"page-content",style:{maxWidth:1200,padding:0},children:t.jsxs("div",{style:{display:"flex",gap:0,minHeight:"calc(100vh - 64px)"},children:[t.jsxs("div",{ref:d,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",background:"#0a0a1a",position:"relative",minHeight:500},children:[t.jsx("canvas",{ref:m,width:f,height:f,style:{cursor:"grab",maxWidth:"100%",maxHeight:"100%"},onMouseDown:ft,onMouseMove:bt,onMouseUp:Xe,onMouseLeave:Xe,onWheel:jt,onTouchStart:vt,onTouchMove:yt,onTouchEnd:Nt}),t.jsx("button",{onClick:()=>at(!be),style:{position:"absolute",top:8,left:8,background:"rgba(0,0,0,0.5)",color:"white",border:"none",padding:"4px 8px",borderRadius:4,cursor:"pointer",fontSize:12},children:be?"â—€":"â–¶ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸"}),t.jsx("div",{style:{position:"absolute",bottom:8,right:8,color:"rgba(255,255,255,0.4)",fontSize:11},children:"ÐœÑ‹ÑˆÑŒ: Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸Ðµ | ÐšÐ¾Ð»ÐµÑÐ¾: Ð¼Ð°ÑÑˆÑ‚Ð°Ð±"})]}),be&&t.jsxs("div",{style:{width:260,background:"#111827",color:"white",padding:8,overflowY:"auto",maxHeight:"calc(100vh - 64px)",fontSize:12},children:[t.jsx("div",{className:"flex gap-1 mb-2",children:["view","kepler","export","import"].map(e=>t.jsx("button",{onClick:()=>le(e),className:`${M} flex-1 ${U===e?"bg-blue-600":"bg-gray-700"}`,children:e==="view"?"3D":e==="kepler"?"Ð¢Ð°Ð±Ð».":e==="export"?"ðŸ“¤":"ðŸ“¥"},e))}),U==="view"&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-2",children:[t.jsx("input",{type:"file",ref:Oe,accept:"image/*",onChange:ot,className:"hidden"}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("button",{onClick:()=>Oe.current?.click(),className:`${M} bg-blue-600 flex-1`,children:B?"âœ“ Ð¢ÐµÐºÑÑ‚ÑƒÑ€Ð°":"ðŸ“ Ð¢ÐµÐºÑÑ‚ÑƒÑ€Ð°"}),B&&t.jsx("button",{onClick:()=>{K(null);const e=new Image;e.onload=()=>{const a=document.createElement("canvas");a.width=e.width,a.height=e.height,a.getContext("2d").drawImage(e,0,0),I.current=a.getContext("2d").getImageData(0,0,e.width,e.height)},e.src="/earth_texture.jpg"},className:`${M} bg-gray-600`,children:"âœ•"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-1 mb-2",children:[t.jsxs("div",{children:[t.jsxs("label",{className:p,children:["â˜€ï¸ ",D,"Â°"]}),t.jsx("input",{type:"range",min:"0",max:"360",value:D,onChange:e=>te(+e.target.value),className:"w-full"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:p,children:["â†• ",j,"Â°"]}),t.jsx("input",{type:"range",min:"-90",max:"90",value:j,onChange:e=>et(+e.target.value),className:"w-full"})]})]}),t.jsxs("div",{className:"flex gap-1 mb-2",children:[t.jsxs("select",{value:re,onChange:e=>tt(+e.target.value),className:`${T} flex-1`,children:[t.jsx("option",{value:1024,children:"1K"}),t.jsx("option",{value:2048,children:"2K"}),t.jsx("option",{value:4096,children:"4K"}),t.jsx("option",{value:8192,children:"8K"})]}),t.jsx("button",{onClick:pt,className:`${M} bg-green-600`,children:"ðŸ“·"})]}),t.jsxs("label",{className:"flex items-center gap-2 mb-2 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:je,onChange:e=>st(e.target.checked),className:"w-4 h-4"}),t.jsx("span",{className:p,children:"ÐŸÐ¾Ð´Ð¿Ð¸ÑÐ¸ ÐšÐ"})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-1 mb-2",children:[t.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:ve,onChange:e=>nt(e.target.checked),className:"w-3 h-3"}),t.jsx("span",{className:p,style:{color:"#ffff00"},children:"Ð­ÐºÐ²Ð°Ñ‚Ð¾Ñ€"})]}),t.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:ye,onChange:e=>lt(e.target.checked),className:"w-3 h-3"}),t.jsx("span",{className:p,style:{color:"#ff4444"},children:"ÐœÐµÑ€Ð¸Ð´Ð¸Ð°Ð½"})]}),t.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:Ne,onChange:e=>rt(e.target.checked),className:"w-3 h-3"}),t.jsx("span",{className:p,children:"ÐžÑÐ¸ XYZ"})]})]}),t.jsxs("div",{className:"border-t border-gray-600 pt-2 mb-2",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:"font-semibold text-xs",children:"ÐÐ½Ð¸Ð¼Ð°Ñ†Ð¸Ñ"}),t.jsx("button",{onClick:()=>it(!ie),className:`${M} ${ie?"bg-red-600":"bg-green-600"}`,children:ie?"â¹":"â–¶"}),t.jsx("button",{onClick:()=>{Ae(0),We(0)},className:`${M} bg-gray-600`,children:"â†º"})]}),t.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.jsx("span",{className:p,children:"Ð¡ÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ:"}),t.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:de,onChange:e=>ct(+e.target.value),className:"flex-1"}),t.jsxs("span",{className:p,children:[de,"x"]})]}),t.jsxs("div",{className:`${p} mt-1`,children:["T: ",Math.floor(Me/60),"Ð¼Ð¸Ð½ | Ð—ÐµÐ¼Ð»Ñ: ",Se.toFixed(1),"Â°"]}),l[i]&&(()=>{const e=(l[i].hp+l[i].ha)/2+C;return t.jsxs("div",{className:`${p} mt-1 bg-black/30 p-1 rounded`,children:[t.jsxs("div",{children:["v = ",Te(e).toFixed(2)," ÐºÐ¼/Ñ"]}),t.jsxs("div",{children:["T = ",(Re(e)/60).toFixed(1)," Ð¼Ð¸Ð½"]})]})})()]}),t.jsxs("div",{className:"border-t border-gray-600 pt-2 mb-2",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsxs("span",{className:"font-semibold",children:["ÐŸÐ»Ð¾ÑÐºÐ¾ÑÑ‚Ð¸ (",l.length,")"]}),t.jsxs("div",{className:"flex gap-0.5",children:[t.jsx("button",{onClick:ut,className:`${M} bg-gray-600`,title:"Ð Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»Ð¸Ñ‚ÑŒ RAAN",children:"âŸ³"}),t.jsx("button",{onClick:dt,className:`${M} bg-blue-600`,children:"+"})]})]}),t.jsx("div",{className:"flex flex-wrap gap-0.5 mb-1",children:l.map((e,a)=>t.jsx("button",{onClick:()=>_(a),className:`${M} ${i===a?"ring-1 ring-white":""}`,style:{backgroundColor:e.color,minWidth:"24px"},children:a+1},a))}),l[i]&&t.jsxs("div",{className:"bg-black/30 p-1 rounded",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsxs("span",{children:["P",i+1]}),t.jsxs("div",{className:"flex gap-1 items-center",children:[t.jsx("input",{type:"color",value:l[i].color,onChange:e=>E(i,"color",e.target.value),className:"w-4 h-4 rounded cursor-pointer"}),t.jsx("button",{onClick:()=>xt(i),className:`${M} bg-red-600`,children:"âœ•"})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-1 mb-1",children:[t.jsxs("div",{children:[t.jsxs("label",{className:p,children:["Ð›Ð¸Ð½Ð¸Ñ ",l[i].orbitWidth||1]}),t.jsx("input",{type:"range",min:"0.5",max:"5",step:"0.5",value:l[i].orbitWidth||1,onChange:e=>E(i,"orbitWidth",+e.target.value),className:"w-full"})]}),t.jsxs("div",{children:[t.jsxs("label",{className:p,children:["Ð¢Ð¾Ñ‡ÐºÐ° ",l[i].satSize||4]}),t.jsx("input",{type:"range",min:"2",max:"12",step:"1",value:l[i].satSize||4,onChange:e=>E(i,"satSize",+e.target.value),className:"w-full"})]})]}),t.jsxs("div",{className:"grid grid-cols-4 gap-1",children:[t.jsxs("div",{children:[t.jsx("label",{className:p,children:"Hp"}),t.jsx("input",{type:"number",value:l[i].hp,onChange:e=>E(i,"hp",+e.target.value),className:T})]}),t.jsxs("div",{children:[t.jsx("label",{className:p,children:"Ha"}),t.jsx("input",{type:"number",value:l[i].ha,onChange:e=>E(i,"ha",+e.target.value),className:T})]}),t.jsxs("div",{children:[t.jsx("label",{className:p,children:"iÂ°"}),t.jsx("input",{type:"number",value:l[i].inc,onChange:e=>E(i,"inc",+e.target.value),className:T})]}),t.jsxs("div",{children:[t.jsx("label",{className:p,children:"Î©Â°"}),t.jsx("input",{type:"number",value:l[i].raan,onChange:e=>E(i,"raan",+e.target.value),className:T})]}),t.jsxs("div",{children:[t.jsx("label",{className:p,children:"Ï‰Â°"}),t.jsx("input",{type:"number",value:l[i].argp,onChange:e=>E(i,"argp",+e.target.value),className:T})]}),t.jsxs("div",{children:[t.jsx("label",{className:p,children:"e"}),t.jsx("input",{type:"number",step:"0.001",value:l[i].ecc,onChange:e=>E(i,"ecc",+e.target.value),className:T})]}),t.jsxs("div",{children:[t.jsx("label",{className:p,children:"N"}),t.jsx("input",{type:"number",min:"1",value:l[i].sats,onChange:e=>E(i,"sats",+e.target.value),className:T})]}),t.jsxs("div",{children:[t.jsx("label",{className:p,children:"Ï†Â°"}),t.jsx("input",{type:"number",value:l[i].phaseOffset,onChange:e=>E(i,"phaseOffset",+e.target.value),className:T})]})]}),t.jsxs("div",{className:"mt-1",children:[t.jsx("label",{className:p,children:"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ñ ÐšÐ (Ñ‡ÐµÑ€ÐµÐ· Ð·Ð°Ð¿ÑÑ‚ÑƒÑŽ)"}),t.jsx("input",{type:"text",value:(l[i].satNames||[]).join(", "),onChange:e=>E(i,"satNames",e.target.value.split(",").map(a=>a.trim()).filter(a=>a)),placeholder:"SAT-1, SAT-2...",className:T})]})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[t.jsxs("div",{children:[t.jsx("label",{className:p,children:"F"}),t.jsx("input",{type:"number",value:$.phaseF,onChange:e=>he({...$,phaseF:+e.target.value}),className:T})]}),t.jsxs("div",{className:"text-gray-400 flex items-end pb-1",children:["ÐšÐ: ",mt]})]})]}),U==="kepler"&&t.jsx("div",{className:"max-h-60 overflow-auto",children:t.jsxs("table",{className:"w-full text-xs",children:[t.jsx("thead",{className:"bg-gray-700 sticky top-0",children:t.jsxs("tr",{children:[t.jsx("th",{children:"ÐšÐ"}),t.jsx("th",{children:"a"}),t.jsx("th",{children:"i"}),t.jsx("th",{children:"v ÐºÐ¼/Ñ"}),t.jsx("th",{children:"T Ð¼Ð¸Ð½"})]})}),t.jsx("tbody",{children:P.map(e=>t.jsxs("tr",{className:"border-b border-gray-700",children:[t.jsx("td",{style:{color:l[e.plane]?.color},children:e.name}),t.jsx("td",{children:e.a.toFixed(0)}),t.jsx("td",{children:e.i.toFixed(1)}),t.jsx("td",{children:Te(e.a).toFixed(2)}),t.jsx("td",{children:(Re(e.a)/60).toFixed(1)})]},e.name))})]})}),U==="export"&&t.jsxs("div",{children:[t.jsx("div",{className:"max-h-64 overflow-auto bg-black/30 p-1 rounded font-mono text-xs mb-2",children:Ye.map((e,a)=>t.jsxs("div",{className:"mb-1",children:[t.jsx("div",{style:{color:l[P[a]?.plane]?.color},children:P[a]?.name}),t.jsx("div",{className:"text-gray-400 break-all",children:e.line1}),t.jsx("div",{className:"text-gray-400 break-all",children:e.line2})]},a))}),t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("button",{onClick:()=>we(Ye.map((e,a)=>`${P[a].name}
${e.line1}
${e.line2}`).join(`

`),"constellation.tle"),className:`${M} bg-blue-600 w-full`,children:"ðŸ“„ Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ TLE"}),t.jsx("button",{onClick:()=>we(gt,"constellation.e"),className:`${M} bg-blue-600 w-full`,children:"ðŸ“„ Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ STK (.e)"}),t.jsx("button",{onClick:()=>{const e=`Name,a_km,e,i_deg,RAAN_deg,ArgP_deg,MA_deg,V_kms,T_min,X_km,Y_km,Z_km
`+P.map(a=>`${a.name},${a.a.toFixed(2)},${a.e.toFixed(6)},${a.i.toFixed(2)},${a.raan.toFixed(2)},${a.argp.toFixed(2)},${a.ma.toFixed(2)},${Te(a.a).toFixed(3)},${(Re(a.a)/60).toFixed(2)},${a.eci.x.toFixed(2)},${a.eci.y.toFixed(2)},${a.eci.z.toFixed(2)}`).join(`
`);we(e,"constellation.csv","text/csv")},className:`${M} bg-blue-600 w-full`,children:"ðŸ“„ Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ CSV"})]})]}),U==="import"&&t.jsxs("div",{children:[t.jsx("div",{className:"text-gray-400 mb-2 text-xs",children:"Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ TLE"}),t.jsx("input",{type:"file",ref:Ue,accept:".tle,.txt",onChange:ht,className:"hidden"}),t.jsx("button",{onClick:()=>Ue.current?.click(),className:`${M} bg-blue-600 w-full mb-2`,children:"ðŸ“ Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ TLE Ñ„Ð°Ð¹Ð»"}),t.jsx("div",{className:"text-gray-400 mb-1 text-xs",children:"Ð¸Ð»Ð¸ Ð²ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ TLE:"}),t.jsx("textarea",{value:Le,onChange:e=>De(e.target.value),placeholder:`ISS (ZARYA)
1 25544U 98067A...
2 25544...`,className:"w-full h-32 bg-black/50 border border-gray-600 rounded p-1 text-xs font-mono text-white resize-none"}),t.jsx("button",{onClick:()=>_e(Le),className:`${M} bg-green-600 w-full mt-1`,children:"Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ"})]})]})]})})}export{zt as default};
